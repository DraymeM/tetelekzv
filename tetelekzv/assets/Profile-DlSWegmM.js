const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Sidebar-DU8-tcww.js","assets/index-DCfB73ig.js","assets/index-DPS57gIo.css","assets/index-DWQgvLeN.js","assets/repo-DMPzTNkn.js","assets/index-mSkvzYyn.js","assets/FormContainer-Cgjp46ug.js","assets/InputField-Cs_Xp2lS.js","assets/SubmitButton-BYfxnONP.js","assets/PageTransition-ByOiZA8F.js","assets/use-resolve-button-type-BY2Ovehm.js","assets/UserInfo-D7OkLEUV.js"])))=>i.map(i=>d[i]);
import{r as n,x as Pe,R as C,A as ae,B as ve,K as G,C as U,D as q,E as M,T as H,G as he,H as S,P as _,I as y,J as N,M as we,Q as le,U as J,V as K,W as L,X as se,j as c,a as Te,d as Ie,N as Se,Y as ye,_ as oe,y as ne}from"./index-DCfB73ig.js";import{u as je}from"./repo-DMPzTNkn.js";import{z as V}from"./index-mSkvzYyn.js";import Ee from"./FormContainer-Cgjp46ug.js";import Y from"./InputField-Cs_Xp2lS.js";import $e from"./SubmitButton-BYfxnONP.js";import{P as ke}from"./PageTransition-ByOiZA8F.js";import{$ as ue,a as Ae,w as Ce,e as Fe}from"./use-resolve-button-type-BY2Ovehm.js";function ze({onFocus:e}){let[t,r]=n.useState(!0),s=Pe();return t?C.createElement(ae,{as:"button",type:"button",features:ve.Focusable,onFocus:o=>{o.preventDefault();let l,a=50;function i(){if(a--<=0){l&&cancelAnimationFrame(l);return}if(e()){if(cancelAnimationFrame(l),!s.current)return;r(!1);return}l=requestAnimationFrame(i)}l=requestAnimationFrame(i)}}):null}const ie=n.createContext(null);function De(){return{groups:new Map,get(e,t){var r;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let o=(r=s.get(t))!=null?r:0;s.set(t,o+1);let l=Array.from(s.keys()).indexOf(t);function a(){let i=s.get(t);i>1?s.set(t,i-1):s.delete(t)}return[l,a]}}}function Me({children:e}){let t=n.useRef(De());return n.createElement(ie.Provider,{value:t},e)}function ce(e){let t=n.useContext(ie);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let r=n.useId(),[s,o]=t.current.get(e,r);return n.useEffect(()=>o,[]),s}var Re=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Re||{}),_e=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(_e||{}),Oe=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Oe||{});let Le={0(e,t){var r;let s=L(e.tabs,u=>u.current),o=L(e.panels,u=>u.current),l=s.filter(u=>{var x;return!((x=u.current)!=null&&x.hasAttribute("disabled"))}),a={...e,tabs:s,panels:o};if(t.index<0||t.index>s.length-1){let u=N(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>N(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(l.length===0)return a;let x=N(u,{0:()=>s.indexOf(l[0]),1:()=>s.indexOf(l[l.length-1])});return{...a,selectedIndex:x===-1?e.selectedIndex:x}}let i=s.slice(0,t.index),P=[...s.slice(t.index),...i].find(u=>l.includes(u));if(!P)return a;let b=(r=s.indexOf(P))!=null?r:e.selectedIndex;return b===-1&&(b=e.selectedIndex),{...a,selectedIndex:b}},1(e,t){if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],s=L([...e.tabs,t.tab],l=>l.current),o=e.selectedIndex;return e.info.current.isControlled||(o=s.indexOf(r),o===-1&&(o=e.selectedIndex)),{...e,tabs:s,selectedIndex:o}},2(e,t){return{...e,tabs:e.tabs.filter(r=>r!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:L([...e.panels,t.panel],r=>r.current)}},4(e,t){return{...e,panels:e.panels.filter(r=>r!==t.panel)}}},Q=n.createContext(null);Q.displayName="TabsDataContext";function O(e){let t=n.useContext(Q);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,O),r}return t}let X=n.createContext(null);X.displayName="TabsActionsContext";function Z(e){let t=n.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Z),r}return t}function Ne(e,t){return N(t.type,Le,e,t)}let Ge="div";function Ue(e,t){let{defaultIndex:r=0,vertical:s=!1,manual:o=!1,onChange:l,selectedIndex:a=null,...i}=e;const P=s?"vertical":"horizontal",b=o?"manual":"auto";let u=a!==null,x=K({isControlled:u}),j=U(t),[g,d]=n.useReducer(Ne,{info:x,selectedIndex:a??r,tabs:[],panels:[]}),F=n.useMemo(()=>({selectedIndex:g.selectedIndex}),[g.selectedIndex]),E=K(l||(()=>{})),w=K(g.tabs),m=n.useMemo(()=>({orientation:P,activation:b,...g}),[P,b,g]),k=M(p=>(d({type:1,tab:p}),()=>d({type:2,tab:p}))),z=M(p=>(d({type:3,panel:p}),()=>d({type:4,panel:p}))),h=M(p=>{v.current!==p&&E.current(p),u||d({type:0,index:p})}),v=K(u?e.selectedIndex:g.selectedIndex),T=n.useMemo(()=>({registerTab:k,registerPanel:z,change:h}),[]);q(()=>{d({type:0,index:a??r})},[a]),q(()=>{if(v.current===void 0||g.tabs.length<=0)return;let p=L(g.tabs,A=>A.current);p.some((A,D)=>g.tabs[D]!==A)&&h(p.indexOf(g.tabs[v.current]))});let R={ref:j},I=J();return C.createElement(Me,null,C.createElement(X.Provider,{value:T},C.createElement(Q.Provider,{value:m},m.tabs.length<=0&&C.createElement(ze,{onFocus:()=>{var p,A;for(let D of w.current)if(((p=D.current)==null?void 0:p.tabIndex)===0)return(A=D.current)==null||A.focus(),!0;return!1}}),I({ourProps:R,theirProps:i,slot:F,defaultTag:Ge,name:"Tabs"}))))}let Je="div";function Be(e,t){let{orientation:r,selectedIndex:s}=O("Tab.List"),o=U(t),l=n.useMemo(()=>({selectedIndex:s}),[s]),a=e,i={ref:o,role:"tablist","aria-orientation":r};return J()({ourProps:i,theirProps:a,slot:l,defaultTag:Je,name:"Tabs.List"})}let He="button";function Ke(e,t){var r,s;let o=n.useId(),{id:l=`headlessui-tabs-tab-${o}`,disabled:a=!1,autoFocus:i=!1,...P}=e,{orientation:b,activation:u,selectedIndex:x,tabs:j,panels:g}=O("Tab"),d=Z("Tab"),F=O("Tab"),[E,w]=n.useState(null),m=n.useRef(null),k=U(m,t,w);q(()=>d.registerTab(m),[d,m]);let z=ce("tabs"),h=j.indexOf(m);h===-1&&(h=z);let v=h===x,T=M(f=>{var $;let B=f();if(B===H.Success&&u==="auto"){let ge=($=he(m))==null?void 0:$.activeElement,re=F.tabs.findIndex(xe=>xe.current===ge);re!==-1&&d.change(re)}return B}),R=M(f=>{let $=j.map(B=>B.current).filter(Boolean);if(f.key===S.Space||f.key===S.Enter){f.preventDefault(),f.stopPropagation(),d.change(h);return}switch(f.key){case S.Home:case S.PageUp:return f.preventDefault(),f.stopPropagation(),T(()=>_($,y.First));case S.End:case S.PageDown:return f.preventDefault(),f.stopPropagation(),T(()=>_($,y.Last))}if(T(()=>N(b,{vertical(){return f.key===S.ArrowUp?_($,y.Previous|y.WrapAround):f.key===S.ArrowDown?_($,y.Next|y.WrapAround):H.Error},horizontal(){return f.key===S.ArrowLeft?_($,y.Previous|y.WrapAround):f.key===S.ArrowRight?_($,y.Next|y.WrapAround):H.Error}}))===H.Success)return f.preventDefault()}),I=n.useRef(!1),p=M(()=>{var f;I.current||(I.current=!0,(f=m.current)==null||f.focus({preventScroll:!0}),d.change(h),we(()=>{I.current=!1}))}),A=M(f=>{f.preventDefault()}),{isFocusVisible:D,focusProps:de}=ue({autoFocus:i}),{isHovered:ee,hoverProps:fe}=Ae({isDisabled:a}),{pressed:te,pressProps:pe}=Ce({disabled:a}),be=n.useMemo(()=>({selected:v,hover:ee,active:te,focus:D,autofocus:i,disabled:a}),[v,ee,D,te,i,a]),me=le({ref:k,onKeyDown:R,onMouseDown:A,onClick:p,id:l,role:"tab",type:Fe(e,E),"aria-controls":(s=(r=g[h])==null?void 0:r.current)==null?void 0:s.id,"aria-selected":v,tabIndex:v?0:-1,disabled:a||void 0,autoFocus:i},de,fe,pe);return J()({ourProps:me,theirProps:P,slot:be,defaultTag:He,name:"Tabs.Tab"})}let Ve="div";function We(e,t){let{selectedIndex:r}=O("Tab.Panels"),s=U(t),o=n.useMemo(()=>({selectedIndex:r}),[r]),l=e,a={ref:s};return J()({ourProps:a,theirProps:l,slot:o,defaultTag:Ve,name:"Tabs.Panels"})}let qe="div",Ye=se.RenderStrategy|se.Static;function Qe(e,t){var r,s,o,l;let a=n.useId(),{id:i=`headlessui-tabs-panel-${a}`,tabIndex:P=0,...b}=e,{selectedIndex:u,tabs:x,panels:j}=O("Tab.Panel"),g=Z("Tab.Panel"),d=n.useRef(null),F=U(d,t);q(()=>g.registerPanel(d),[g,d]);let E=ce("panels"),w=j.indexOf(d);w===-1&&(w=E);let m=w===u,{isFocusVisible:k,focusProps:z}=ue(),h=n.useMemo(()=>({selected:m,focus:k}),[m,k]),v=le({ref:F,id:i,role:"tabpanel","aria-labelledby":(s=(r=x[w])==null?void 0:r.current)==null?void 0:s.id,tabIndex:m?P:-1},z),T=J();return!m&&((o=b.unmount)==null||o)&&!((l=b.static)!=null&&l)?C.createElement(ae,{"aria-hidden":"true",...v}):T({ourProps:v,theirProps:b,slot:h,defaultTag:qe,features:Ye,visible:m,name:"Tabs.Panel"})}let Xe=G(Ke),Ze=G(Ue),et=G(Be),tt=G(We),rt=G(Qe),W=Object.assign(Xe,{Group:Ze,List:et,Panels:tt,Panel:rt});const st=V.object({currentPassword:V.string().min(1,"Kötelező mező"),newPassword:V.string().min(6,"A jelszónak legalább 6 karakter hosszúnak kell lennie"),confirmPassword:V.string()}).refine(e=>e.newPassword===e.confirmPassword,{message:"A jelszavak nem egyeznek",path:["confirmPassword"]}),nt=({onSubmit:e,errors:t,isSubmitting:r,successMessage:s,currentPassword:o,newPassword:l,confirmPassword:a,setCurrentPassword:i,setNewPassword:P,setConfirmPassword:b})=>c.jsx(Ee,{error:t.general||null,success:s,label:"Jelszó módosítása",children:c.jsxs("form",{onSubmit:e,className:"space-y-6",children:[c.jsx(Y,{label:"Jelenlegi jelszó",value:o,onChange:u=>i(u.target.value),error:t.currentPassword,enablePasswordToggle:!0}),c.jsx(Y,{label:"Új jelszó",value:l,onChange:u=>P(u.target.value),error:t.newPassword,enablePasswordToggle:!0}),c.jsx(Y,{label:"Jelszó megerősítése",value:a,onChange:u=>b(u.target.value),error:t.confirmPassword,enablePasswordToggle:!0}),c.jsx($e,{isPending:r,label:r?"Feldolgozás...":"Jelszó mentése"})]})}),at=C.lazy(()=>oe(()=>import("./Sidebar-DU8-tcww.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),lt=C.lazy(()=>oe(()=>import("./UserInfo-D7OkLEUV.js"),__vite__mapDeps([11,1,2,3]))),mt=()=>{const{logout:e,isAuthenticated:t,isSuperUser:r,username:s}=Te(),o=Ie(),[l,a]=n.useState(!1),[i,P]=n.useState(""),[b,u]=n.useState(""),[x,j]=n.useState(""),[g,d]=n.useState({}),[F,E]=n.useState(!1),[w,m]=n.useState(null),k=async()=>{try{await e(),ne.success("Sikeres kijelentkezés!"),o({to:"/login"})}catch{ne.error("Hiba történt a kijelentkezés során")}},z=async h=>{var T,R;h.preventDefault(),E(!0),m(null);const v=st.safeParse({currentPassword:i,newPassword:b,confirmPassword:x});if(!v.success){const I={};v.error.issues.forEach(p=>{I[p.path[0]]=p.message}),d(I),E(!1);return}try{await je(i,b,x),m("Jelszó sikeresen frissítve!"),P(""),u(""),j(""),d({})}catch(I){d({general:((R=(T=I.response)==null?void 0:T.data)==null?void 0:R.error)||"Hiba történt a jelszó frissítésekor"})}finally{E(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx(Se,{}),c.jsx(ke,{children:c.jsxs(n.Suspense,{children:[c.jsx("div",{className:"lg:hidden p-4 flex justify-between items-center mt-15 z-50 overflow-hidden",children:c.jsx("button",{className:"p-2 border-border rounded-md focus:outline-none",onClick:()=>a(!0),"aria-label":"Open menu",children:c.jsx(ye,{size:36})})}),c.jsx(W.Group,{children:c.jsxs("div",{className:"flex mt-4 relative",children:[c.jsx(at,{isOpen:l,onClose:()=>a(!1)}),c.jsx("div",{className:"flex-1 p-8 ml-0 lg:mr-64 lg:ml-64",children:c.jsxs(W.Panels,{children:[c.jsx(W.Panel,{children:c.jsx(lt,{username:s||"",isSuperUser:r,isAuthenticated:t,onLogout:k})}),c.jsx(W.Panel,{children:c.jsx(nt,{onSubmit:z,errors:g,isSubmitting:F,successMessage:w,currentPassword:i,newPassword:b,confirmPassword:x,setCurrentPassword:P,setNewPassword:u,setConfirmPassword:j})})]})})]})})]})})]})};export{mt as P,W as T};
