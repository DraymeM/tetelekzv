const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-CjoR27-N.js","assets/index-tLXF0cbT.js","assets/index-Ba7vPGC1.css","assets/InputField-B8eVNXU1.js","assets/SubmitButton-UGpQ8qGf.js"])))=>i.map(i=>d[i]);
import{f as L,r as a,j as s,R as v,_ as h,y as n}from"./index-tLXF0cbT.js";import{r as O}from"./repo-uUgoOcNV.js";import{O as N}from"./OfflinePlaceholder-D3ekM9q8.js";import{u as I}from"./useOnlineStatus-C4ZdUeES.js";import{P as D}from"./PageTransition-C1JfaaEv.js";import{o as F,s as c}from"./types-CZYGTQuY.js";const V=v.lazy(()=>h(()=>import("./FormContainer-CjoR27-N.js"),__vite__mapDeps([0,1,2]))),u=v.lazy(()=>h(()=>import("./InputField-B8eVNXU1.js"),__vite__mapDeps([3,1,2]))),Z=v.lazy(()=>h(()=>import("./SubmitButton-UGpQ8qGf.js"),__vite__mapDeps([4,1,2]))),H=()=>{const S=L(),[d,w]=a.useState(""),[g,b]=a.useState(""),[f,x]=a.useState(""),[P,k]=a.useState(""),[E,p]=a.useState(null),[y,_]=a.useState(null),[R,z]=a.useState(!1),[l,m]=a.useState({}),[t,o]=a.useState({}),A=I(),T=F({username:c().min(3,"Legalább 3 karakter").max(32,"Legfeljebb 32 karakter").regex(/^[a-zA-Z0-9_]+$/,"Csak betűk, számok és aláhúzás (_) megengedett"),email:c().min(5,"Legalább 5 karakter").max(254,"Túl hosszú email cím").email("Érvényes email cím szükséges"),password:c().min(8,"Legalább 8 karakter").max(30,"Túl hosszú jelszó").regex(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/,"A jelszónak tartalmaznia kell betűt és számot"),confirmPassword:c()}).refine(e=>e.password===e.confirmPassword,{message:"Nem egyeznek a jelszavak!",path:["confirmPassword"]}),C=async e=>{e.preventDefault(),p(null),_(null),z(!0),o({username:!0,email:!0,password:!0,confirmPassword:!0});const j=T.safeParse({username:d,email:g,password:f,confirmPassword:P});if(!j.success){const r={};j.error.issues.forEach(i=>{r[i.path[0]]=i.message}),m(r),z(!1);return}try{await O(d,g,f),_("Sikeres Regisztráció!"),n.success("Sikeres regisztráció!"),w(""),b(""),x(""),k(""),m({}),o({}),S({to:"/login"})}catch(r){r.response?.status===409?r.response.data.error.includes("Email")?(m(i=>({...i,email:"Az email cím már foglalt"})),n.error("Az email cím már foglalt")):r.response.data.error.includes("Username")?(m(i=>({...i,username:"A felhasználónév már foglalt"})),n.error("A felhasználónév már foglalt")):(p(r.response.data.error||"Registration failed"),n.error(r.response.data.error||"Nems sikerült a regisztráció!")):(p(r instanceof Error?r.message:"Registration failed"),n.error("Nems sikerült a regisztráció!"))}finally{z(!1)}};return A?s.jsx(a.Suspense,{children:s.jsx(D,{children:s.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen pb-55 pt-30 justify-center overflow-hidden",children:s.jsx(V,{error:E,success:y,label:"Register",children:s.jsxs("form",{onSubmit:C,className:"space-y-4",children:[s.jsx(u,{id:"username",label:"Felhasználónév",value:d,onChange:e=>{w(e.target.value),o({...t,username:!0})},error:t.username?l.username:void 0}),s.jsx(u,{id:"email",label:"Email",value:g,onChange:e=>{b(e.target.value),o({...t,email:!0})},error:t.email?l.email:void 0}),s.jsx(u,{id:"password",label:"Jelszó",value:f,onChange:e=>{x(e.target.value),o({...t,password:!0})},enablePasswordToggle:!0,error:t.password?l.password:void 0}),s.jsx(u,{id:"confirm-password",label:"Jelszó megerősítése",value:P,onChange:e=>{k(e.target.value),o({...t,confirmPassword:!0})},enablePasswordToggle:!0,error:t.confirmPassword?l.confirmPassword:void 0}),s.jsx(Z,{isPending:R,label:"Register"})]})})})})}):s.jsx(N,{})};export{H as R};
