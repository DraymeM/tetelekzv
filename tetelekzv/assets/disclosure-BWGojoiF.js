import{$ as L,a as X,w as j,e as q}from"./use-resolve-button-type-BTf3vrD_.js";import{R as S,K as T,r as l,C as x,a_ as z,E as y,I as Q,an as A,U as h,a$ as W,az as Y,N as k,aA as C,aF as Z,aG as ee,aL as te,b0 as le,J as $,Q as U,X as V}from"./index-DPYyAyTg.js";import{s as se}from"./bugs-zGjU3fDZ.js";var _;let ae=(_=S.startTransition)!=null?_:function(e){e()};var ne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ne||{}),re=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(re||{});let oe={0:e=>({...e,disclosureState:k(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},w=l.createContext(null);w.displayName="DisclosureContext";function B(e){let t=l.useContext(w);if(t===null){let c=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,B),c}return t}let F=l.createContext(null);F.displayName="DisclosureAPIContext";function G(e){let t=l.useContext(F);if(t===null){let c=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,G),c}return t}let O=l.createContext(null);O.displayName="DisclosurePanelContext";function ue(){return l.useContext(O)}function ce(e,t){return k(t.type,oe,e,t)}let ie=l.Fragment;function de(e,t){let{defaultOpen:c=!1,...i}=e,u=l.useRef(null),d=x(t,z(r=>{u.current=r},e.as===void 0||e.as===l.Fragment)),p=l.useReducer(ce,{disclosureState:c?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:s,buttonId:a},b]=p,n=y(r=>{b({type:1});let f=Q(u);if(!f||!a)return;let E=r?A(r)?r:"current"in r&&A(r.current)?r.current:f.getElementById(a):f.getElementById(a);E?.focus()}),v=l.useMemo(()=>({close:n}),[n]),m=l.useMemo(()=>({open:s===0,close:n}),[s,n]),I={ref:d},D=h();return S.createElement(w.Provider,{value:p},S.createElement(F.Provider,{value:v},S.createElement(W,{value:n},S.createElement(Y,{value:k(s,{0:C.Open,1:C.Closed})},D({ourProps:I,theirProps:i,slot:m,defaultTag:ie,name:"Disclosure"})))))}let pe="button";function fe(e,t){let c=l.useId(),{id:i=`headlessui-disclosure-button-${c}`,disabled:u=!1,autoFocus:d=!1,...p}=e,[s,a]=B("Disclosure.Button"),b=ue(),n=b===null?!1:b===s.panelId,v=l.useRef(null),m=x(v,t,y(o=>{if(!n)return a({type:4,element:o})}));l.useEffect(()=>{if(!n)return a({type:2,buttonId:i}),()=>{a({type:2,buttonId:null})}},[i,a,n]);let I=y(o=>{var P;if(n){if(s.disclosureState===1)return;switch(o.key){case $.Space:case $.Enter:o.preventDefault(),o.stopPropagation(),a({type:0}),(P=s.buttonElement)==null||P.focus();break}}else switch(o.key){case $.Space:case $.Enter:o.preventDefault(),o.stopPropagation(),a({type:0});break}}),D=y(o=>{switch(o.key){case $.Space:o.preventDefault();break}}),r=y(o=>{var P;se(o.currentTarget)||u||(n?(a({type:0}),(P=s.buttonElement)==null||P.focus()):a({type:0}))}),{isFocusVisible:f,focusProps:E}=L({autoFocus:d}),{isHovered:g,hoverProps:R}=X({isDisabled:u}),{pressed:M,pressProps:N}=j({disabled:u}),H=l.useMemo(()=>({open:s.disclosureState===0,hover:g,active:M,disabled:u,focus:f,autofocus:d}),[s,g,M,f,u,d]),K=q(e,s.buttonElement),J=n?U({ref:m,type:K,disabled:u||void 0,autoFocus:d,onKeyDown:I,onClick:r},E,R,N):U({ref:m,id:i,type:K,"aria-expanded":s.disclosureState===0,"aria-controls":s.panelElement?s.panelId:void 0,disabled:u||void 0,autoFocus:d,onKeyDown:I,onKeyUp:D,onClick:r},E,R,N);return h()({ourProps:J,theirProps:p,slot:H,defaultTag:pe,name:"Disclosure.Button"})}let me="div",Ee=V.RenderStrategy|V.Static;function Se(e,t){let c=l.useId(),{id:i=`headlessui-disclosure-panel-${c}`,transition:u=!1,...d}=e,[p,s]=B("Disclosure.Panel"),{close:a}=G("Disclosure.Panel"),[b,n]=l.useState(null),v=x(t,y(g=>{ae(()=>s({type:5,element:g}))}),n);l.useEffect(()=>(s({type:3,panelId:i}),()=>{s({type:3,panelId:null})}),[i,s]);let m=Z(),[I,D]=ee(u,b,m!==null?(m&C.Open)===C.Open:p.disclosureState===0),r=l.useMemo(()=>({open:p.disclosureState===0,close:a}),[p.disclosureState,a]),f={ref:v,id:i,...te(D)},E=h();return S.createElement(le,null,S.createElement(O.Provider,{value:p.panelId},E({ourProps:f,theirProps:d,slot:r,defaultTag:me,features:Ee,visible:I,name:"Disclosure.Panel"})))}let be=T(de),Ie=T(fe),ye=T(Se),$e=Object.assign(be,{Button:Ie,Panel:ye});export{$e as V};
