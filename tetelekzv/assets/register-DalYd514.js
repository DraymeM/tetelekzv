import{e as z,r as s,j as r,y as b}from"./index-BiJQXA51.js";import{z as n,F as R,S as N}from"./SubmitButton-3LXwvxVi.js";import{I as m}from"./InputField-BGbmQ1gL.js";import{r as F}from"./repo-B7dmna8k.js";const I=()=>{const x=z(),[i,d]=s.useState(""),[c,g]=s.useState(""),[f,w]=s.useState(""),[j,p]=s.useState(null),[k,h]=s.useState(null),[y,l]=s.useState(!1),[u,v]=s.useState({}),[a,t]=s.useState({}),C=n.object({username:n.string().min(3,"Legalább 3 karakter"),password:n.string().min(6,"Legalább 6 karakter"),confirmPassword:n.string()}).refine(e=>e.password===e.confirmPassword,{message:"Nem egyeznek a jelszavak!",path:["confirmPassword"]}),E=async e=>{e.preventDefault(),p(null),h(null),l(!0),t({username:!0,password:!0,confirmPassword:!0});const P=C.safeParse({username:i,password:c,confirmPassword:f});if(!P.success){const o={};P.error.issues.forEach(S=>{o[S.path[0]]=S.message}),v(o),l(!1);return}try{await F(i,c),h("Sikeres Regiszráció!"),b.success("Sikeres regisztráció!"),d(""),g(""),w(""),v({}),t({}),x({to:"/login"})}catch(o){p(o instanceof Error?o.message:"Registration failed"),b.error("Nems sikerült a regisztráció!")}finally{l(!1)}};return r.jsx("div",{children:r.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen py-50 justify-center overflow-hidden",children:r.jsx(R,{error:j,success:k,label:"Register",children:r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsx(m,{label:"Username",value:i,onChange:e=>{d(e.target.value),t({...a,username:!0})},error:a.username?u.username:void 0}),r.jsx(m,{label:"Password",value:c,onChange:e=>{g(e.target.value),t({...a,password:!0})},enablePasswordToggle:!0,error:a.password?u.password:void 0}),r.jsx(m,{label:"Confirm Password",value:f,onChange:e=>{w(e.target.value),t({...a,confirmPassword:!0})},enablePasswordToggle:!0,error:a.confirmPassword?u.confirmPassword:void 0}),r.jsx(N,{isPending:y,label:"Register"})]})})})})},D=I;export{D as component};
