import{a as N,e as E,r as t,j as e,L as F,y as v}from"./index-BiJQXA51.js";import{z as u,F as P,S as B}from"./SubmitButton-3LXwvxVi.js";import{I as x}from"./InputField-BGbmQ1gL.js";const K=()=>{const{login:f}=N(),z=E(),[l,b]=t.useState(""),[i,d]=t.useState(""),[w,c]=t.useState(!1),[m,h]=t.useState({}),[a,n]=t.useState({}),S=u.object({username:u.string().min(1,"Kötelező mező"),password:u.string().min(1,"Kötelező mező")}),y=async s=>{var j,p;s.preventDefault(),c(!0),n({username:!0,password:!0});const g=S.safeParse({username:l,password:i});if(!g.success){const o={};g.error.issues.forEach(r=>{o[r.path[0]]=r.message}),h(o),c(!1);return}try{await f(l,i),v.success("Sikeres bejelentkezés!"),z({to:"/"})}catch(o){const r=((p=(j=o.response)==null?void 0:j.data)==null?void 0:p.error)||"Bejelentkezési hiba",k=r==="Invalid credentials"?"Hibás felhasználónév vagy jelszó":r;v.error(k)}finally{c(!1),d(""),h({}),n({})}};return e.jsx("div",{children:e.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen py-50 justify-center overflow-hidden",children:e.jsx(P,{error:null,success:null,label:"Bejelentkezés",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx(x,{label:"Felhasználónév",value:l,onChange:s=>{b(s.target.value),n({...a,username:!0})},error:a.username?m.username:void 0}),e.jsx(x,{label:"Jelszó",value:i,onChange:s=>{d(s.target.value),n({...a,password:!0})},enablePasswordToggle:!0,error:a.password?m.password:void 0}),e.jsx(B,{isPending:w,label:"Bejelentkezés"}),e.jsx("div",{className:"text-left mt-2",children:e.jsx(F,{to:"/register",className:"text-md text-teal-400 hover:underline",children:"Nincs fiókod? Regisztrálj"})})]})})})})};export{K as L};
