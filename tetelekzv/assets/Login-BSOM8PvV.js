const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-BJjelaWH.js","assets/index-vBRKwINY.js","assets/index-NQ_ZRRmA.css","assets/InputField-DYnmexyT.js","assets/SubmitButton-C9AcErNh.js"])))=>i.map(i=>d[i]);
import{b as E,f as T,r as s,j as e,R as u,a as k,_ as d,y as j}from"./index-vBRKwINY.js";import{O}from"./OfflinePlaceholder-j2sJlGF2.js";import{u as R}from"./useOnlineStatus-BGXvz0nh.js";import{P as I}from"./PageTransition-B4Qkecvx.js";import{o as L,s as v}from"./types-CZYGTQuY.js";const N=u.lazy(()=>d(()=>import("./FormContainer-BJjelaWH.js"),__vite__mapDeps([0,1,2]))),x=u.lazy(()=>d(()=>import("./InputField-DYnmexyT.js"),__vite__mapDeps([3,1,2]))),F=u.lazy(()=>d(()=>import("./SubmitButton-C9AcErNh.js"),__vite__mapDeps([4,1,2]))),K=()=>{const{login:g}=E(),_=T(),[i,z]=s.useState(""),[l,m]=s.useState(""),[b,c]=s.useState(!1),[p,h]=s.useState({}),[a,n]=s.useState({}),y=R(),w=L({username:v().min(1,"Kötelező mező"),password:v().min(1,"Kötelező mező")}),P=async r=>{r.preventDefault(),c(!0),n({username:!0,password:!0});const f=w.safeParse({username:i,password:l});if(!f.success){const o={};f.error.issues.forEach(t=>{o[t.path[0]]=t.message}),h(o),c(!1);return}try{await g(i,l),j.success("Sikeres bejelentkezés!"),_({to:"/"})}catch(o){const t=o.response?.data?.error||"Bejelentkezési hiba",S=t==="Invalid credentials"?"Hibás felhasználónév vagy jelszó":t;j.error(S)}finally{c(!1),m(""),h({}),n({})}};return y?e.jsx(s.Suspense,{children:e.jsx(I,{children:e.jsx("div",{children:e.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen  pb-50 pt-35 justify-center overflow-hidden",children:e.jsx(N,{error:null,success:null,label:"Bejelentkezés",children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsx(x,{id:"username",label:"Felhasználónév",value:i,onChange:r=>{z(r.target.value),n({...a,username:!0})},error:a.username?p.username:void 0}),e.jsx(x,{id:"password",label:"Jelszó",value:l,onChange:r=>{m(r.target.value),n({...a,password:!0})},enablePasswordToggle:!0,error:a.password?p.password:void 0}),e.jsx(F,{isPending:b,label:"Bejelentkezés"}),e.jsx("div",{className:"text-left mt-2",children:e.jsx(k,{to:"/register",className:"text-md text-teal-400 hover:underline",children:"Nincs fiókod? Regisztrálj"})})]})})})})})}):e.jsx(e.Fragment,{children:e.jsx(O,{})})};export{K as L};
