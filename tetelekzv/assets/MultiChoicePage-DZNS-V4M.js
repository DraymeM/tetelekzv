import{f as C,r as s,j as e,S as h,a as q,i as Q,z as j,k as A,l as P,m as E,n as L}from"./index-jHaOORfY.js";import{u as M}from"./useQuery-Cjn-lWIM.js";import{N as m}from"./Navbar-B0SbqR4x.js";import O from"./AnswerPicker-Bf34wam5.js";import{u as R,T as K}from"./useTimer-CM53MigV.js";import{d as D}from"./repo-iWLVBpnl.js";import{P as V}from"./PageTransition-D_oABWwn.js";import{O as H}from"./OfflinePlaceholder-D4MBM3yC.js";import{u as W}from"./useOnlineStatus-BDNYofbW.js";function $(){const g=C(),{data:t,isLoading:o,error:d}=M({queryKey:["randomMultiQuestion"],queryFn:D,retry:2,refetchOnWindowFocus:!1}),y=W(),[N,c]=s.useState(0),[b,x]=s.useState(0),[v,i]=s.useState(0),[w,l]=s.useState(!1),{timerEnabled:u,setTimerEnabled:k,timerDuration:f,setTimerDuration:F,timeLeft:T,setTimeLeft:p}=R(a,10);function a(){g.invalidateQueries({queryKey:["randomMultiQuestion"]}),p(f),l(!1)}s.useEffect(()=>{!t&&!o&&a()},[t,o]);const S=n=>{w||(x(r=>r+1),n?(c(r=>r+1),i(r=>r+1)):i(0),l(!0))},z=()=>{c(0),x(0),i(0),l(!1),a()};return y?o?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("div",{className:"p-10 text-center",children:e.jsx(h,{})})]}):d?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",d.message]}):!t||"error"in t?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("div",{className:"p-10 text-center text-muted-foreground",children:"No questions available."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(V,{children:e.jsxs(s.Suspense,{fallback:e.jsx(h,{}),children:[e.jsxs(q,{to:"/mquestions",className:`inline-flex items-center px-3 py-2 border border-border mt-20 md:ml-10 ml-1 rounded-md\r
                               text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground\r
                               focus:outline-none focus:ring-2 focus:ring-primary transition-colors`,children:[e.jsx(Q,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("main",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsx(j,{as:s.Fragment,show:!0,appear:!0,enter:"transition ease-out duration-500",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-300",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsxs("div",{className:"flex flex-row gap-6 mb-6 text-muted-foreground text-sm justify-center",children:[e.jsxs("div",{className:"flex items-center md:gap-2 bg-green-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(A,{className:"text-green-500"}),e.jsxs("span",{className:"text-foreground",children:["Válaszok:"," ",e.jsx("span",{className:"font-semibold text-green-500",children:N})]})]}),e.jsxs("div",{className:"flex items-center md:gap-2 bg-blue-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(P,{className:"text-blue-500"}),e.jsxs("span",{className:"text-foreground",children:["Kérdések:"," ",e.jsx("span",{className:"font-semibold text-blue-500",children:b})]})]}),e.jsxs("div",{className:"flex items-center md:gap-2 bg-yellow-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(E,{className:"text-yellow-500"}),e.jsxs("span",{className:"text-foreground",children:["Sorozat:"," ",e.jsx("span",{className:"font-semibold text-yellow-500",children:v})]})]})]})}),e.jsx(j,{as:s.Fragment,show:!!t,enter:"transition ease-out duration-500 transform",enterFrom:"opacity-0 translate-x-4",enterTo:"opacity-100 translate-x-0",leave:"transition ease-in duration-300 transform",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 translate-x-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-secondary text-foreground w-full overflow-auto max-h-[80vh] shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:t.question}),e.jsx(O,{answers:t.answers,onPick:S})]}),e.jsx(K,{onNext:a,timerEnabled:u,setTimerEnabled:k,timerDuration:f,setTimerDuration:n=>{F(n),p(n)}}),u&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",T," másodperc múlva"]}),e.jsxs("button",{className:"mt-1 px-6 py-3 rounded bg-red-600 hover:bg-red-700 text-white transition-all transform hover:cursor-pointer flex items-center gap-2",onClick:z,children:[e.jsx(L,{}),"Újrakezdés"]})]})})]})]})})]}):e.jsx(e.Fragment,{children:e.jsx(H,{})})}export{$ as M};
