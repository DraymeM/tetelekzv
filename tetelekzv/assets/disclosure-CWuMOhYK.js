import{$ as _,a as G,w as J,e as Q}from"./use-resolve-button-type-DH_UGUqv.js";import{R as S,K as T,r as l,B as x,aM as W,D as I,Q as h,aN as X,at as q,I as k,ag as z,ah as Y,ai as C,am as Z,aO as ee,M as K,W as j,G as $,E as te}from"./index-BQ-Le8Of.js";import{r as le}from"./bugs-DpEN4NTH.js";var L;let se=(L=S.startTransition)!=null?L:function(e){e()};var ne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ne||{}),re=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(re||{});let ae={0:e=>({...e,disclosureState:k(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},w=l.createContext(null);w.displayName="DisclosureContext";function B(e){let t=l.useContext(w);if(t===null){let c=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,B),c}return t}let M=l.createContext(null);M.displayName="DisclosureAPIContext";function A(e){let t=l.useContext(M);if(t===null){let c=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,A),c}return t}let O=l.createContext(null);O.displayName="DisclosurePanelContext";function oe(){return l.useContext(O)}function ue(e,t){return k(t.type,ae,e,t)}let ce=l.Fragment;function ie(e,t){let{defaultOpen:c=!1,...i}=e,o=l.useRef(null),d=x(t,W(u=>{o.current=u},e.as===void 0||e.as===l.Fragment)),p=l.useReducer(ue,{disclosureState:c?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:s,buttonId:n},b]=p,r=I(u=>{b({type:1});let f=te(o);if(!f||!n)return;let E=u?u instanceof HTMLElement?u:u.current instanceof HTMLElement?u.current:f.getElementById(n):f.getElementById(n);E==null||E.focus()}),D=l.useMemo(()=>({close:r}),[r]),m=l.useMemo(()=>({open:s===0,close:r}),[s,r]),y={ref:d},v=h();return S.createElement(w.Provider,{value:p},S.createElement(M.Provider,{value:D},S.createElement(X,{value:r},S.createElement(q,{value:k(s,{0:C.Open,1:C.Closed})},v({ourProps:y,theirProps:i,slot:m,defaultTag:ce,name:"Disclosure"})))))}let de="button";function pe(e,t){let c=l.useId(),{id:i=`headlessui-disclosure-button-${c}`,disabled:o=!1,autoFocus:d=!1,...p}=e,[s,n]=B("Disclosure.Button"),b=oe(),r=b===null?!1:b===s.panelId,D=l.useRef(null),m=x(D,t,I(a=>{if(!r)return n({type:4,element:a})}));l.useEffect(()=>{if(!r)return n({type:2,buttonId:i}),()=>{n({type:2,buttonId:null})}},[i,n,r]);let y=I(a=>{var P;if(r){if(s.disclosureState===1)return;switch(a.key){case $.Space:case $.Enter:a.preventDefault(),a.stopPropagation(),n({type:0}),(P=s.buttonElement)==null||P.focus();break}}else switch(a.key){case $.Space:case $.Enter:a.preventDefault(),a.stopPropagation(),n({type:0});break}}),v=I(a=>{switch(a.key){case $.Space:a.preventDefault();break}}),u=I(a=>{var P;le(a.currentTarget)||o||(r?(n({type:0}),(P=s.buttonElement)==null||P.focus()):n({type:0}))}),{isFocusVisible:f,focusProps:E}=_({autoFocus:d}),{isHovered:g,hoverProps:F}=G({isDisabled:o}),{pressed:R,pressProps:N}=J({disabled:o}),U=l.useMemo(()=>({open:s.disclosureState===0,hover:g,active:R,disabled:o,focus:f,autofocus:d}),[s,g,R,f,o,d]),H=Q(e,s.buttonElement),V=r?K({ref:m,type:H,disabled:o||void 0,autoFocus:d,onKeyDown:y,onClick:u},E,F,N):K({ref:m,id:i,type:H,"aria-expanded":s.disclosureState===0,"aria-controls":s.panelElement?s.panelId:void 0,disabled:o||void 0,autoFocus:d,onKeyDown:y,onKeyUp:v,onClick:u},E,F,N);return h()({ourProps:V,theirProps:p,slot:U,defaultTag:de,name:"Disclosure.Button"})}let fe="div",me=j.RenderStrategy|j.Static;function Ee(e,t){let c=l.useId(),{id:i=`headlessui-disclosure-panel-${c}`,transition:o=!1,...d}=e,[p,s]=B("Disclosure.Panel"),{close:n}=A("Disclosure.Panel"),[b,r]=l.useState(null),D=x(t,I(g=>{se(()=>s({type:5,element:g}))}),r);l.useEffect(()=>(s({type:3,panelId:i}),()=>{s({type:3,panelId:null})}),[i,s]);let m=z(),[y,v]=Y(o,b,m!==null?(m&C.Open)===C.Open:p.disclosureState===0),u=l.useMemo(()=>({open:p.disclosureState===0,close:n}),[p.disclosureState,n]),f={ref:D,id:i,...Z(v)},E=h();return S.createElement(ee,null,S.createElement(O.Provider,{value:p.panelId},E({ourProps:f,theirProps:d,slot:u,defaultTag:fe,features:me,visible:y,name:"Disclosure.Panel"})))}let Se=T(ie),be=T(pe),ye=T(Ee),Pe=Object.assign(Se,{Button:be,Panel:ye});export{Pe as j};
