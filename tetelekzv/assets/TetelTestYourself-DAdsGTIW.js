const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TimerSection-7iubWWAY.js","assets/index-DaprCxnA.js","assets/index-BIrAcGUK.css","assets/TimerControls-CYpEE9Uv.js","assets/menu-CQpvV0Tf.js","assets/use-resolve-button-type-CmnioDhJ.js","assets/bugs-BOCIKkdU.js","assets/label-DiLoC0Im.js","assets/ResetButton-yh5Ktsi7.js","assets/ScoreBoard-Dkty1WlK.js","assets/QuestionCard-C1s9UzEz.js","assets/AnswerPicker-CPcl-sCZ.js"])))=>i.map(i=>d[i]);
import{r as s,j as e,z as w,L as _,g as O,k as $,aX as B,aY as K,aZ as W,a_ as Y,u as J,f as X,S as Z,a as ee,R as N,_ as k}from"./index-DaprCxnA.js";import{u as D}from"./useQuery-CxLIcma_.js";import{h as se,g as te}from"./repo-Dy-ukzJ_.js";import{P as ae}from"./PageTransition-DPo7WQF5.js";import{O as re}from"./OfflinePlaceholder-RQFBe3qp.js";import{u as ne}from"./useOnlineStatus-Bp_TNCcT.js";import{u as oe}from"./useTimer-BzqsBItD.js";import{b as ie}from"./index-Bs5ooOST.js";const S=[{threshold:85,icon:e.jsx($,{className:"text-4xl text-green-600"}),message:"Fantasztikus munka! Igazi bajnok vagy!"},{threshold:75,icon:e.jsx(B,{className:"text-4xl text-lime-600"}),message:"Nagyszerű eredmény! Csak így tovább!"},{threshold:60,icon:e.jsx(K,{className:"text-4xl text-amber-500"}),message:"Szép munka, már majdnem tökéletes!"},{threshold:50,icon:e.jsx(W,{className:"text-4xl text-orange-600"}),message:"Jó kezdet! Gyakorolj még egy kicsit!"},{threshold:0,icon:e.jsx(Y,{className:"text-4xl text-rose-600"}),message:"Ne csüggedj, legközelebb jobb lesz!"}];function le({isOpen:l,score:a,total:d,onClose:T}){const t=d>0?a/d*100:0,[i,c]=s.useState(0),[f,h]=s.useState(!1),m=s.useRef(null),{start:g}=ie.useCountUp({ref:m,start:0,end:t,duration:3,startOnMount:!1,useEasing:!0});s.useEffect(()=>{if(l){c(0),h(!1),requestAnimationFrame(()=>{c(t)});const r=setTimeout(()=>{g()},100),z=setTimeout(()=>{h(!0)},3e3);return()=>{clearTimeout(r),clearTimeout(z)}}},[l,t,g]);const{icon:u,message:p}=S.find(r=>t>=r.threshold)??S[S.length-1];return e.jsx(w,{appear:!0,show:l,as:s.Fragment,children:e.jsxs(_,{as:"div",className:"relative z-10",onClose:()=>{},children:[e.jsx(w.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(w.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(_.Panel,{className:"w-full max-w-md border-border border-2 transform overflow-hidden rounded-xl bg-secondary p-6 text-center align-middle shadow-xl transition-all",children:[e.jsx(_.Title,{as:"h3",className:"text-2xl leading-6 text-foreground font-bold mb-4",children:"Teszt Eredmények"}),e.jsxs("p",{className:"text-sm text-foreground mb-2",children:["Helyes válaszok:"," ",e.jsx("span",{className:"font-semibold text-green-500",children:a}),"/",d]}),e.jsxs("div",{className:"flex flex-col space-y-3 w-full items-center",children:[e.jsx("span",{ref:m,className:"text-2xl font-bold text-primary"}),e.jsx("div",{className:"w-full max-w-xs h-4 bg-border rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-1500 ease-in-out",style:{width:`${i}%`,backgroundColor:"var(--primary)"},role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Teszt eredmény előrehaladás"})})]}),f&&e.jsxs("div",{className:"mt-4 flex flex-col items-center space-y-2",children:[e.jsx("span",{"aria-hidden":"true",children:u}),e.jsx("p",{className:"text-sm text-foreground",children:p})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsxs("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-border hover:cursor-pointer rounded-md text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground focus:outline-none focus:ring-2 focus:ring-primary transition-colors",onClick:T,"aria-label":"Vissza a kérdésekhez",title:"Vissza a kérdésekhez",children:[e.jsx(O,{className:"mr-2","aria-hidden":"true"}),"Vissza a kérdésekhez"]})})]})})})})]})})}const de=N.lazy(()=>k(()=>import("./TimerSection-7iubWWAY.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),ce=N.lazy(()=>k(()=>import("./ResetButton-yh5Ktsi7.js"),__vite__mapDeps([8,1,2]))),me=N.lazy(()=>k(()=>import("./ScoreBoard-Dkty1WlK.js"),__vite__mapDeps([9,1,2]))),ue=N.lazy(()=>k(()=>import("./QuestionCard-C1s9UzEz.js"),__vite__mapDeps([10,1,2,11])));function ve(){const{id:l}=J({strict:!1}),a=Number(l),d=X(),T=ne(),[t,i]=s.useState(0),[c,f]=s.useState(0),[h,m]=s.useState(0),[g,u]=s.useState(0),[p,r]=s.useState(!1),[z,j]=s.useState(!1),[R,q]=s.useState(!1),{data:b,isLoading:C,error:F}=D({queryKey:["tetelQuestions",a],queryFn:()=>se({tetelId:a,page:1,limit:1e3}),enabled:!isNaN(a)&&a>0,staleTime:1e3*60*5,refetchOnWindowFocus:!1}),{data:E,isLoading:L,error:P}=D({queryKey:["multiQuestionDetails",b?.data[t]?.id],queryFn:()=>te(b.data[t].id),enabled:!!b?.data[t]?.id,staleTime:1e3*60*5,refetchOnWindowFocus:!1}),o=b?.data??[];s.useEffect(()=>{!C&&!L&&q(!0)},[C,L]);const{timerEnabled:A,setTimerEnabled:I,timerDuration:y,setTimerDuration:V,timeLeft:Q,setTimeLeft:v}=oe(()=>{t<o.length-1&&!p&&(i(n=>n+1),r(!1),v(y))},10),U=n=>{p||(m(x=>x+1),n?(f(x=>x+1),u(x=>x+1)):u(0),r(!0),t===o.length-1&&j(!0))},G=()=>{t<o.length-1?(i(n=>n+1),r(!1),v(y)):j(!0)},H=()=>{i(0),f(0),m(0),u(0),r(!1),v(y),j(!1)},M=()=>{j(!1),d({to:"/tetelek/$id/questions",params:{id:a.toString()}})};return R?F||P?T?e.jsxs("div",{className:"text-center mt-10 text-red-500",children:["Hiba: ",(F||P)?.message]}):e.jsx(re,{}):e.jsx(s.Suspense,{children:e.jsx(ae,{children:e.jsxs("div",{className:"text-center pt-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 px-4",children:[e.jsxs(ee,{to:"/tetelek/$id",params:{id:a.toString()},className:"inline-flex items-center px-3 py-2 border border-border rounded-md text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground focus:outline-none focus:ring-2 focus:ring-primary transition-colors","aria-label":"Vissza a tételhez",title:"Vissza a tételhez",children:[e.jsx(O,{className:"mr-2","aria-hidden":"true"}),"Vissza"]}),e.jsx("div",{className:"text-foreground bg-secondary px-2 rounded-md text-md font-medium text-center",children:o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-primary font-bold",children:t+1}),e.jsx("span",{className:"mx-1 text-foreground",children:"/"}),e.jsx("span",{children:o.length})]})})]}),o.length===0?e.jsx("p",{className:"p-4 bg-secondary shadow-md rounded-md transition text-foreground duration-300 border-transparent hover:border-muted-foreground border-2 cursor-pointer transform",children:"Nincsenek kérdések ehhez a tételhez."}):e.jsxs("main",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto p-4 text-center",children:[e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsx(me,{score:c,questionsAnswered:h,streak:g}),e.jsx(ue,{question:E?.question,answers:E?.answers??[],onPick:U}),e.jsx(de,{timerEnabled:A,setTimerEnabled:I,timerDuration:y,setTimerDuration:n=>{V(n),v(n)},timeLeft:Q,onNext:G}),e.jsx(ce,{onClick:H})]}),e.jsx(le,{isOpen:z,score:c,total:o.length,onClose:M})]})})}):e.jsx("div",{className:"p-10 text-center",children:e.jsx(Z,{})})}export{ve as T};
