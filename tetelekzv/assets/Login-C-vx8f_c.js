const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-e92Wkx_N.js","assets/index-CjHgB-9B.js","assets/index-CwiyTVBM.css","assets/InputField-CPjSDRa9.js","assets/SubmitButton-C6gTFPp6.js"])))=>i.map(i=>d[i]);
import{b as N,f as k,r as s,j as e,z as d,L as f,R as u,a as L,_ as m,y as j}from"./index-CjHgB-9B.js";import{O}from"./OfflinePlaceholder-BRjtviK7.js";import{u as R}from"./useOnlineStatus-BHyzc8OP.js";import{P as C}from"./PageTransition-CV3Y8buX.js";import{o as I,s as g}from"./types-CZYGTQuY.js";const A=u.lazy(()=>m(()=>import("./FormContainer-e92Wkx_N.js"),__vite__mapDeps([0,1,2]))),y=u.lazy(()=>m(()=>import("./InputField-CPjSDRa9.js"),__vite__mapDeps([3,1,2]))),B=u.lazy(()=>m(()=>import("./SubmitButton-C6gTFPp6.js"),__vite__mapDeps([4,1,2]))),J=()=>{const z=R(),{login:_}=N(),b=k(),[w]=s.useState(!0),[i,P]=s.useState(""),[l,p]=s.useState(""),[S,c]=s.useState(!1),[h,v]=s.useState({}),[x,n]=s.useState({}),T=I({username:g().min(1,"Kötelező mező"),password:g().min(1,"Kötelező mező")}),E=async t=>{t.preventDefault(),c(!0),n({username:!0,password:!0});const a=T.safeParse({username:i,password:l});if(!a.success){const o={};a.error.issues.forEach(r=>{o[r.path[0]]=r.message}),v(o),c(!1);return}try{await _(i,l),j.success("Sikeres bejelentkezés!"),b({to:"/"})}catch(o){const r=o.response?.data?.error||"Bejelentkezési hiba",F=r==="Invalid credentials"?"Hibás felhasználónév vagy jelszó":r;j.error(F)}finally{c(!1),p(""),v({}),n({})}};return z?e.jsx(d,{appear:!0,show:w,as:s.Fragment,children:e.jsxs(f,{as:"div",className:"relative z-50",onClose:()=>{},children:[e.jsx(d.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-40",leave:"ease-in duration-200",leaveFrom:"opacity-40",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-background"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(d.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx(f.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl text-left align-middle transition-all",children:e.jsx(s.Suspense,{children:e.jsx(C,{children:e.jsx(A,{error:null,success:null,label:"Bejelentkezés",children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx(y,{id:"username",label:"Felhasználónév",value:i,onChange:t=>{P(t.target.value),n(a=>({...a,username:!0}))},error:x.username?h.username:void 0}),e.jsx(y,{id:"password",label:"Jelszó",value:l,onChange:t=>{p(t.target.value),n(a=>({...a,password:!0}))},enablePasswordToggle:!0,error:x.password?h.password:void 0}),e.jsx(B,{isPending:S,label:"Bejelentkezés"}),e.jsx("div",{className:"text-left mt-2",children:e.jsx(L,{to:"/register",className:"text-md text-primary hover:underline",children:"Nincs fiókod? Regisztrálj"})})]})})})})})})})})]})}):e.jsx(O,{})};export{J as L};
