import{r as t,j as e,D as F,E as T,B as z,C as q,d as E,N as p,S as v,G as L,J as Q,M as A,P as M,L as R,b as P}from"./index-BKFVu-gy.js";import{u as D}from"./useQuery-BHhNw2Kg.js";import{u as I,T as K}from"./useTimer-SwGMm0jS.js";import{b as H}from"./repo-BkP0mGIY.js";function B({answers:i,onPick:r}){const[a,o]=t.useState(null),[n,c]=t.useState(!1),[x,d]=t.useState(!0);t.useEffect(()=>{d(!0),o(null),c(!1);const s=setTimeout(()=>{d(!1)},300);return()=>clearTimeout(s)},[i]);const h=s=>{n||x||(o(s),c(!0),r(i[s].isCorrect))};return x?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx(F,{className:"animate-spin text-primary text-5xl"})}):e.jsx(T,{as:"div",appear:!0,show:!0,enter:"transition-all duration-500",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",children:e.jsx("div",{className:"flex flex-col gap-4",children:i.map((s,l)=>e.jsx("button",{onClick:()=>h(l),className:`w-full px-4 py-3 rounded-lg font-medium transition hover:cursor-pointer text-left shadow
              ${n?s.isCorrect?"bg-green-600 text-foreground":a===l?"bg-red-600 text-foreground":"bg-muted text-foreground":"bg-muted hover:bg-background text-foreground"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.text}),n&&s.isCorrect&&e.jsx(z,{className:"text-green-300 ml-3"}),n&&a===l&&!s.isCorrect&&e.jsx(q,{className:"text-red-300 ml-3"})]})},l))})})}function W(){const i=E(),{data:r,isLoading:a,error:o}=D({queryKey:["randomMultiQuestion"],queryFn:H,retry:2,refetchOnWindowFocus:!1}),[n,c]=t.useState(0),[x,d]=t.useState(0),[h,s]=t.useState(0),[l,j]=t.useState(!1),{timerEnabled:g,setTimerEnabled:y,timerDuration:b,setTimerDuration:k,timeLeft:w,setTimeLeft:N}=I(u,10);function u(){i.invalidateQueries({queryKey:["randomMultiQuestion"]}),N(b),j(!1)}t.useEffect(()=>{!r&&!a&&u()},[r,a]);const C=f=>{l||(d(m=>m+1),f?(c(m=>m+1),s(m=>m+1)):s(0),j(!0))},S=()=>{c(0),d(0),s(0),j(!1),u()};return a?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx("div",{className:"p-10 text-center",children:e.jsx(v,{})})]}):o?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",o.message]}):!r||"error"in r?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx("div",{className:"p-10 text-center text-muted-foreground",children:"No questions available."})]}):e.jsx(e.Fragment,{children:e.jsxs(t.Suspense,{fallback:e.jsx(v,{}),children:[e.jsx(p,{}),e.jsxs("main",{className:"flex flex-col items-center justify-center  mt-25 max-w-4xl mx-auto p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 text-muted-foreground text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"text-green-500"}),e.jsxs("span",{children:["Helyes válaszok: ",e.jsx("span",{className:"font-semibold",children:n})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"text-blue-500"}),e.jsxs("span",{children:["Megválaszolt kérdések:"," ",e.jsx("span",{className:"font-semibold",children:x})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"text-yellow-500"}),e.jsxs("span",{children:["Sorozat: ",e.jsx("span",{className:"font-semibold",children:h})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-lg bg-secondary text-foreground w-full overflow-auto max-h-[80vh]",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.question}),e.jsx(B,{answers:r.answers,onPick:C})]}),e.jsx(K,{onNext:u,timerEnabled:g,setTimerEnabled:y,timerDuration:b,setTimerDuration:f=>{k(f),N(f)}}),g&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",w," másodperc múlva"]}),e.jsxs("button",{className:"mt-8 px-6 py-3 rounded bg-red-600 hover:bg-red-700 text-white transition-all transform hover:scale-105 flex items-center gap-2",onClick:S,children:[e.jsx(M,{}),"Újrakezdés"]})]}),e.jsx(R,{to:"/pmchq",className:"fixed bottom-7 right-7 p-3 bg-emerald-600 text-white rounded-full hover:bg-emerald-700 transition-all transform hover:scale-105 flex items-center justify-center",title:"Adj hozzá saját kérdést",children:e.jsx(P,{size:20})})]})]})})}export{W as M};
