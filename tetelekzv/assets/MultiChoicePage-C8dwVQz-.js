import{e as z,r,j as e,S as j,i as C,k as T,l as q,m as Q,n as A}from"./index-olnGjB74.js";import{u as L}from"./useQuery-Tn6Fa2GV.js";import{L as E}from"./link-DVucSle3.js";import{N as m}from"./Navbar-ODnhT9L7.js";import M from"./AnswerPicker-CxLoW4HA.js";import{u as P,T as R}from"./useTimer-B8kFVvWN.js";import{d as D}from"./repo-VB8zIIGh.js";import{P as K}from"./PageTransition-CJHyo5J0.js";function U(){const p=z(),{data:s,isLoading:i,error:c}=L({queryKey:["randomMultiQuestion"],queryFn:D,retry:2,refetchOnWindowFocus:!1}),[g,d]=r.useState(0),[N,x]=r.useState(0),[b,l]=r.useState(0),[v,o]=r.useState(!1),{timerEnabled:u,setTimerEnabled:k,timerDuration:f,setTimerDuration:y,timeLeft:w,setTimeLeft:h}=P(a,10);function a(){p.invalidateQueries({queryKey:["randomMultiQuestion"]}),h(f),o(!1)}r.useEffect(()=>{!s&&!i&&a()},[s,i]);const F=n=>{v||(x(t=>t+1),n?(d(t=>t+1),l(t=>t+1)):l(0),o(!0))},S=()=>{d(0),x(0),l(0),o(!1),a()};return i?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("div",{className:"p-10 text-center",children:e.jsx(j,{})})]}):c?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",c.message]}):!s||"error"in s?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("div",{className:"p-10 text-center text-muted-foreground",children:"No questions available."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(K,{children:e.jsxs(r.Suspense,{fallback:e.jsx(j,{}),children:[e.jsxs(E,{to:"/mquestions",className:`inline-flex items-center px-3 py-2 border border-border mt-20 md:ml-10 ml-1 rounded-md\r
                               text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground\r
                               focus:outline-none focus:ring-2 focus:ring-primary transition-colors`,children:[e.jsx(C,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("main",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 text-muted-foreground text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"text-green-500"}),e.jsxs("span",{children:["Helyes válaszok:"," ",e.jsx("span",{className:"font-semibold",children:g})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"text-blue-500"}),e.jsxs("span",{children:["Megválaszolt kérdések:"," ",e.jsx("span",{className:"font-semibold",children:N})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"text-yellow-500"}),e.jsxs("span",{children:["Sorozat: ",e.jsx("span",{className:"font-semibold",children:b})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-lg bg-secondary text-foreground w-full overflow-auto max-h-[80vh]",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:s.question}),e.jsx(M,{answers:s.answers,onPick:F})]}),e.jsx(R,{onNext:a,timerEnabled:u,setTimerEnabled:k,timerDuration:f,setTimerDuration:n=>{y(n),h(n)}}),u&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",w," másodperc múlva"]}),e.jsxs("button",{className:"mt-1 px-6 py-3 rounded bg-red-600 hover:bg-red-700 text-white transition-all transform hover:scale-105 flex items-center gap-2",onClick:S,children:[e.jsx(A,{}),"Újrakezdés"]})]})]})]})})]})}export{U as M};
