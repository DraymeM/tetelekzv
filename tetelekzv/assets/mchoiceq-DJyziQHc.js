import{r as t,j as e,C as F,D as T,A as z,B as q,c as A,N as p,S as v,E,G as L,J as Q,M as R,L as M,b as P}from"./index-W4Q2XZbk.js";import{u as D}from"./useQuery-D08VLsAS.js";import{u as I,T as K}from"./useTimer-BbXEQuz6.js";import{b as H}from"./repo-DCCUqUpe.js";import"./utils-km2FGkQ4.js";function B({answers:i,onPick:r}){const[a,c]=t.useState(null),[n,o]=t.useState(!1),[d,m]=t.useState(!0);t.useEffect(()=>{m(!0),c(null),o(!1);const s=setTimeout(()=>{m(!1)},300);return()=>clearTimeout(s)},[i]);const f=s=>{n||d||(c(s),o(!0),r(i[s].isCorrect))};return d?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx(F,{className:"animate-spin text-blue-400 text-5xl"})}):e.jsx(T,{as:"div",appear:!0,show:!0,enter:"transition-all duration-500",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",children:e.jsx("div",{className:"flex flex-col gap-4",children:i.map((s,l)=>e.jsx("button",{onClick:()=>f(l),className:`w-full px-4 py-3 rounded-lg font-medium transition hover:cursor-pointer text-left shadow
              ${n?s.isCorrect?"bg-green-600 text-white":a===l?"bg-red-600 text-white":"bg-gray-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:s.text}),n&&s.isCorrect&&e.jsx(z,{className:"text-green-300 ml-3"}),n&&a===l&&!s.isCorrect&&e.jsx(q,{className:"text-red-300 ml-3"})]})},l))})})}function G(){const i=A(),{data:r,isLoading:a,error:c}=D({queryKey:["randomMultiQuestion"],queryFn:H,retry:2,refetchOnWindowFocus:!1}),[n,o]=t.useState(0),[d,m]=t.useState(0),[f,s]=t.useState(0),[l,j]=t.useState(!1),{timerEnabled:g,setTimerEnabled:y,timerDuration:b,setTimerDuration:w,timeLeft:k,setTimeLeft:N}=I(u,10);function u(){i.invalidateQueries({queryKey:["randomMultiQuestion"]}),N(b),j(!1)}t.useEffect(()=>{!r&&!a&&u()},[r,a]);const C=h=>{l||(m(x=>x+1),h?(o(x=>x+1),s(x=>x+1)):s(0),j(!0))},S=()=>{o(0),m(0),s(0),j(!1),u()};return a?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx("div",{className:"p-10 text-center",children:e.jsx(v,{})})]}):c?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",c.message]}):!r||"error"in r?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx("div",{className:"p-10 text-center text-gray-400",children:"No questions available."})]}):e.jsx(e.Fragment,{children:e.jsxs(t.Suspense,{fallback:e.jsx(v,{}),children:[e.jsx(p,{}),e.jsxs("main",{className:"flex flex-col items-center justify-center min-h-screen mt-5 max-w-4xl mx-auto p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-gray-300",children:"Csak egy válaszlehetőség jó!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 text-gray-400 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"text-green-500"}),e.jsxs("span",{children:["Helyes válaszok: ",e.jsx("span",{className:"font-semibold",children:n})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"text-blue-500"}),e.jsxs("span",{children:["Megválaszolt kérdések:"," ",e.jsx("span",{className:"font-semibold",children:d})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"text-yellow-500"}),e.jsxs("span",{children:["Sorozat: ",e.jsx("span",{className:"font-semibold",children:f})]})]})]}),e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-lg bg-gray-800 text-white w-full overflow-auto max-h-[80vh]",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.question}),e.jsx(B,{answers:r.answers,onPick:C})]}),e.jsx(K,{onNext:u,timerEnabled:g,setTimerEnabled:y,timerDuration:b,setTimerDuration:h=>{w(h),N(h)}}),g&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",k," másodperc múlva"]}),e.jsxs("button",{className:"mt-8 px-6 py-3 rounded bg-red-600 hover:bg-red-700 transition-all transform hover:scale-105 flex items-center gap-2",onClick:S,children:[e.jsx(R,{}),"Újrakezdés"]})]}),e.jsx(M,{to:"/pmchq",className:"fixed bottom-7 right-7 p-3 bg-emerald-600 text-white rounded-full hover:bg-emerald-700 transition-all transform hover:scale-105 flex items-center justify-center",title:"Adj hozzá saját kérdést",children:e.jsx(P,{size:20})})]})]})})}const U=G;export{U as component};
