const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnswerInput-Bp6p9K_S.js","assets/index-tLXF0cbT.js","assets/index-Ba7vPGC1.css","assets/use-resolve-button-type-CeasRZ9O.js","assets/label-BNFLWe75.js","assets/bugs-7gXlmc3-.js","assets/QuestionInput-LoKd51lZ.js","assets/FormContainer-CjoR27-N.js","assets/SubmitButton-UGpQ8qGf.js"])))=>i.map(i=>d[i]);
import{r as a,j as r,R as u,_ as i}from"./index-tLXF0cbT.js";import{o as E,a as I,s as w,b as D}from"./types-CZYGTQuY.js";const L=E({text:w().min(1,"A válasz szövege nem lehet üres"),isCorrect:D()}),h=E({question:w().min(1,"A kérdés megadása kötelező"),answers:I(L).length(4,"Pontosan négy válasz szükséges").refine(c=>c.some(m=>m.isCorrect),{message:"Legalább egy válasznak helyesnek kell lennie"})}),V=u.lazy(()=>i(()=>import("./AnswerInput-Bp6p9K_S.js"),__vite__mapDeps([0,1,2,3,4,5]))),F=u.lazy(()=>i(()=>import("./QuestionInput-LoKd51lZ.js"),__vite__mapDeps([6,1,2]))),O=u.lazy(()=>i(()=>import("./FormContainer-CjoR27-N.js"),__vite__mapDeps([7,1,2]))),Q=u.lazy(()=>i(()=>import("./SubmitButton-UGpQ8qGf.js"),__vite__mapDeps([8,1,2]))),H=({onSubmit:c,isPending:m,initialQuestion:y="",initialAnswers:b=[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}],successMessage:x,errorMessage:v,submitLabel:S,formLabel:g})=>{const[o,j]=a.useState(y),[n,z]=a.useState(b),[l,A]=a.useState({question:void 0,answers:[null,null,null,null],arrayError:void 0}),[d,p]=a.useState({question:!1,answers:[!1,!1,!1,!1]}),[T,k]=a.useState(!1);a.useEffect(()=>{const s=h.safeParse({question:o,answers:n}),e={question:void 0,answers:[null,null,null,null],arrayError:void 0};s.success||s.error.errors.forEach(t=>{t.path[0]==="question"?e.question=t.message:t.path[0]==="answers"&&(typeof t.path[1]=="number"?e.answers[t.path[1]]=t.message:e.arrayError=t.message)}),A(e)},[o,n]);const q=(s,e,t)=>{const f=[...n];f[s]={...f[s],[e]:t},z(f),p(_=>({..._,answers:_.answers.map((C,R)=>R===s?!0:C)}))},P=s=>{s.preventDefault();const e=h.safeParse({question:o,answers:n});if(k(!0),!e.success){p({question:!0,answers:[!0,!0,!0,!0]});return}c({question:o,answers:n})};return r.jsx(a.Suspense,{children:r.jsx(O,{error:v??null,success:x??null,label:g,children:r.jsxs("form",{onSubmit:P,className:"space-y-6",children:[r.jsx(F,{question:o,setQuestion:j,fieldErrors:l,touched:d}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Válaszok"}),n.map((s,e)=>r.jsx(V,{answer:s,index:e,updateAnswer:q,fieldErrors:l.answers[e],touched:d.answers[e]},e)),T&&l.arrayError&&r.jsx("p",{className:"text-red-500 text-sm ml-11 animate-in fade-in duration-200",children:l.arrayError})]}),r.jsx(Q,{isPending:m,label:S})]})})})};export{H as default};
