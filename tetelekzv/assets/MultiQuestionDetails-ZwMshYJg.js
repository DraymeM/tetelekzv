const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeleteModal-DZiFbS9i.js","assets/index-BT5olunS.js","assets/index-CNDMz1Av.css","assets/AnswerPicker-D7jojuaM.js"])))=>i.map(i=>d[i]);
import{a as b,b as v,f as y,e as k,r as a,g as r,j as e,O as N,S as w,i as z,R as u,v as _,w as q,_ as d}from"./index-BT5olunS.js";import{L as l}from"./link-B2bN1KjX.js";import{u as E}from"./useLocation-2PD0QyBd.js";import{u as M}from"./useQuery-B2tX-dpz.js";import{u as P}from"./useMutation-Buslm402.js";import{i as D,j as S}from"./repo-DL4fAiI8.js";import{N as F}from"./Navbar-BE0Cl1aM.js";import{P as O}from"./PageTransition-BU5ysc6Q.js";const L=u.lazy(()=>d(()=>import("./DeleteModal-DZiFbS9i.js"),__vite__mapDeps([0,1,2]))),Q=u.lazy(()=>d(()=>import("./AnswerPicker-D7jojuaM.js"),__vite__mapDeps([3,1,2])));function W(){const{id:m}=b({strict:!1}),t=Number(m),c=E().pathname.includes("/edit"),{isAuthenticated:i,isSuperUser:x}=v(),f=y(),h=k(),[p,o]=a.useState(!1),{data:s,isLoading:j,error:g}=M({queryKey:["multiQuestions",t],queryFn:()=>S(t),staleTime:1e3*60*5,refetchOnWindowFocus:!1}),n=P({mutationFn:()=>{if(!i)throw r.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!x)throw r.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return D(t)},onSuccess:()=>{h.invalidateQueries({queryKey:["multiQuestions"]}),r.success("Sikeresen törölted a kérdést."),f({to:"/mquestions"})},onError:()=>{}});return c?e.jsx(N,{}):j?e.jsx(w,{}):g||!s?e.jsx("div",{className:"p-10 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(O,{children:e.jsxs(a.Suspense,{children:[e.jsxs(l,{to:"/mquestions",className:"inline-flex items-center px-3 py-2 border border-border mt-20 ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(z,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:s.question}),e.jsx(Q,{answers:s.answers,onPick:()=>{}})]}),e.jsx(L,{isOpen:p,onClose:()=>o(!1),onDelete:()=>n.mutate(),isDeleting:n.isPending,itemName:s.question})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(l,{to:"/mquestions/$id/edit",params:{id:t.toString()},className:`fixed bottom-22 right-7 p-3 bg-blue-600 text-white rounded-full \r
                       hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(_,{size:20})}),e.jsx("button",{onClick:()=>o(!0),className:`fixed bottom-7 right-7 p-3 bg-rose-600 text-white rounded-full \r
                       hover:bg-rose-700 hover:cursor-pointer transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(q,{size:20})})]})]})}export{W as M};
