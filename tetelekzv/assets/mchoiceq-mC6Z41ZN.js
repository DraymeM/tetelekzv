import{r as n,j as e,a as A,z as E,b as I,c as M,S as L,N as R,d as q,e as Q,f as P,g as D}from"./index-DpOF11Fq.js";import{u as K,a as $}from"./repo-CrtQG9Cr.js";import{u as H,T as V}from"./useTimer-C8f8ulLw.js";function _({answers:s,onPick:l}){const[r,a]=n.useState(null),[m,x]=n.useState(!1),[d,u]=n.useState(!0);n.useEffect(()=>{u(!0),a(null),x(!1);const t=setTimeout(()=>{u(!1)},300);return()=>clearTimeout(t)},[s]);const f=t=>{m||d||(a(t),x(!0),l(s[t].isCorrect))};return d?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx(A,{className:"animate-spin text-blue-400 text-5xl"})}):e.jsx(E,{as:"div",appear:!0,show:!0,enter:"transition-all duration-500",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",children:e.jsx("div",{className:"flex flex-col gap-4",children:s.map((t,o)=>e.jsx("button",{onClick:()=>f(o),className:`w-full px-4 py-3 rounded-lg font-medium transition hover:cursor-pointer text-left shadow
              ${m?t.isCorrect?"bg-green-600 text-white":r===o?"bg-red-600 text-white":"bg-gray-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:t.text}),m&&t.isCorrect&&e.jsx(I,{className:"text-green-300 ml-3"}),m&&r===o&&!t.isCorrect&&e.jsx(M,{className:"text-red-300 ml-3"})]})},o))})})}function B(s){const l=s.slice();for(let r=l.length-1;r>0;r--){const a=Math.floor(Math.random()*(r+1));[l[r],l[a]]=[l[a],l[r]]}return l}function G(){const{data:s,isLoading:l,error:r}=K({queryKey:["multiQuestions"],queryFn:$}),[a,m]=n.useState(null),[x,d]=n.useState([]),[u,f]=n.useState(0),[t,o]=n.useState(0),[y,j]=n.useState(0),h=()=>{if(!s||s.length===0)return;let i=s.map((v,z)=>z);a!==null&&s.length>1&&(i=i.filter(v=>v!==a));const c=i[Math.floor(Math.random()*i.length)];m(c),b(g);const F=B(s[c].answers);d(F)},{timerEnabled:p,setTimerEnabled:w,timerDuration:g,setTimerDuration:k,timeLeft:S,setTimeLeft:b}=H(h,10);if(n.useEffect(()=>{s&&a===null&&h()},[s]),l)return e.jsx(L,{});if(r instanceof Error)return e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",r.message]});const N=a!==null?(s??[])[a]:null,C=i=>{o(c=>c+1),i?(f(c=>c+1),j(c=>c+1)):j(0)},T=()=>{f(0),o(0),j(0),h()};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs("main",{className:"flex flex-col items-center justify-center min-h-screen mt-5 max-w-4xl mx-auto p-4 text-center ",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-gray-300",children:"Csak egy válaszlehetőség jó!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 text-gray-400 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"text-green-500"}),e.jsxs("span",{children:["Helyes válaszok: ",e.jsx("span",{className:"font-semibold",children:u})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"text-blue-500"}),e.jsxs("span",{children:["Megválaszolt kérdések:"," ",e.jsx("span",{className:"font-semibold",children:t})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"text-yellow-500"}),e.jsxs("span",{children:["Sorozat: ",e.jsx("span",{className:"font-semibold",children:y})]})]})]}),s&&e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-6",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:`${t/s.length*100}%`}})}),N&&e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-lg bg-gray-800 text-white w-full overflow-auto max-h-[80vh]",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:N.question}),e.jsx(_,{answers:x,onPick:C})]}),e.jsx(V,{onNext:h,timerEnabled:p,setTimerEnabled:w,timerDuration:g,setTimerDuration:i=>{k(i),b(i)}}),p&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",S," másodperc múlva"]}),e.jsxs("button",{className:"mt-8 px-6 py-3 rounded bg-red-600 hover:bg-red-700 transition-all transform hover:scale-105 flex items-center gap-2",onClick:T,children:[e.jsx(D,{}),"Újrakezdés"]})]})]})]})}const W=G;export{W as component};
