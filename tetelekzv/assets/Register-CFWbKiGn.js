const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-C7sMO7Fu.js","assets/index-T2y7T9f9.js","assets/index-DXpQFr3M.css","assets/InputField-IJfRP2qw.js","assets/SubmitButton-BqIUdTTG.js"])))=>i.map(i=>d[i]);
import{g as O,r,j as e,R as d,_ as g,y as b}from"./index-T2y7T9f9.js";import{r as C}from"./repo-CZfOB8Ou.js";import{O as F}from"./OfflinePlaceholder-DdAa7frD.js";import{u as I}from"./useOnlineStatus-4ReRS2BE.js";import{o as L,s as u}from"./types-CZYGTQuY.js";const N=d.lazy(()=>g(()=>import("./FormContainer-C7sMO7Fu.js"),__vite__mapDeps([0,1,2]))),m=d.lazy(()=>g(()=>import("./InputField-IJfRP2qw.js"),__vite__mapDeps([3,1,2]))),D=d.lazy(()=>g(()=>import("./SubmitButton-BqIUdTTG.js"),__vite__mapDeps([4,1,2]))),q=()=>{const j=O(),[n,f]=r.useState(""),[i,p]=r.useState(""),[w,v]=r.useState(""),[E,h]=r.useState(null),[y,P]=r.useState(null),[R,l]=r.useState(!1),[c,x]=r.useState({}),[a,t]=r.useState({}),z=I(),k=L({username:u().min(3,"Legalább 3 karakter"),password:u().min(6,"Legalább 6 karakter"),confirmPassword:u()}).refine(s=>s.password===s.confirmPassword,{message:"Nem egyeznek a jelszavak!",path:["confirmPassword"]}),T=async s=>{s.preventDefault(),h(null),P(null),l(!0),t({username:!0,password:!0,confirmPassword:!0});const _=k.safeParse({username:n,password:i,confirmPassword:w});if(!_.success){const o={};_.error.issues.forEach(S=>{o[S.path[0]]=S.message}),x(o),l(!1);return}try{await C(n,i),P("Sikeres Regiszráció!"),b.success("Sikeres regisztráció!"),f(""),p(""),v(""),x({}),t({}),j({to:"/login"})}catch(o){h(o instanceof Error?o.message:"Registration failed"),b.error("Nems sikerült a regisztráció!")}finally{l(!1)}};return z?e.jsx(r.Suspense,{children:e.jsx("div",{children:e.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen pb-55 pt-30 justify-center overflow-hidden",children:e.jsx(N,{error:E,success:y,label:"Register",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsx(m,{id:"username",label:"Felhasználónév",value:n,onChange:s=>{f(s.target.value),t({...a,username:!0})},error:a.username?c.username:void 0}),e.jsx(m,{id:"password",label:"Jelszó",value:i,onChange:s=>{p(s.target.value),t({...a,password:!0})},enablePasswordToggle:!0,error:a.password?c.password:void 0}),e.jsx(m,{id:"confirm password",label:"Jelszó megerősítése",value:w,onChange:s=>{v(s.target.value),t({...a,confirmPassword:!0})},enablePasswordToggle:!0,error:a.confirmPassword?c.confirmPassword:void 0}),e.jsx(D,{isPending:R,label:"Register"})]})})})})}):e.jsx(e.Fragment,{children:e.jsx(F,{})})};export{q as R};
