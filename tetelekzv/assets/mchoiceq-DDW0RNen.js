import{r as l,j as e,a as S,z as y,b as v,c as I,S as F,N as E,d as T,e as z,t as f}from"./index-BT1oeFPX.js";import{u as A,a as M}from"./repo-CbaS1-io.js";function L({answers:r,onPick:i}){const[a,n]=l.useState(null),[u,x]=l.useState(!1),[d,o]=l.useState(!0);l.useEffect(()=>{o(!0),n(null),x(!1);const t=setTimeout(()=>{o(!1)},300);return()=>clearTimeout(t)},[r]);const h=t=>{u||d||(n(t),x(!0),i(r[t].isCorrect))};return d?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx(S,{className:"animate-spin text-blue-400 text-5xl"})}):e.jsx(y,{as:"div",appear:!0,show:!0,enter:"transition-all duration-500",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",children:e.jsx("div",{className:"flex flex-col gap-4",children:r.map((t,m)=>e.jsx("button",{onClick:()=>h(m),className:`w-full px-4 py-3 rounded-lg font-medium transition hover:cursor-pointer text-left shadow
              ${u?t.isCorrect?"bg-green-600 text-white":a===m?"bg-red-600 text-white":"bg-gray-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:t.text}),u&&t.isCorrect&&e.jsx(v,{className:"text-green-300 ml-3"}),u&&a===m&&!t.isCorrect&&e.jsx(I,{className:"text-red-300 ml-3"})]})},m))})})}function R(r){const i=r.slice();for(let a=i.length-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));[i[a],i[n]]=[i[n],i[a]]}return i}function q(){const{data:r,isLoading:i,error:a}=A({queryKey:["multiQuestions"],queryFn:M}),[n,u]=l.useState(null),[x,d]=l.useState([]),[o,h]=l.useState(!1),[t,m]=l.useState(10),[N,g]=l.useState(t),p=()=>{if(!r||r.length===0)return;let s=r.map((b,C)=>C);n!==null&&r.length>1&&(s=s.filter(b=>b!==n));const c=s[Math.floor(Math.random()*s.length)];u(c),g(t);const k=R(r[c].answers);d(k)};if(l.useEffect(()=>{r&&n===null&&p()},[r]),l.useEffect(()=>{if(!o||n===null)return;const s=setInterval(()=>{g(c=>c===1?(p(),t):c-1)},1e3);return()=>clearInterval(s)},[o,n,t]),i)return e.jsx("div",{children:e.jsx(F,{})});if(a instanceof Error)return e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",a.message]});const j=n!==null?(r??[])[n]:null,w=s=>{};return e.jsxs(e.Fragment,{children:[e.jsx(E,{}),e.jsxs("main",{className:"flex flex-col items-center justify-center min-h-screen max-w-4xl mx-auto p-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-gray-300",children:"Csak egy válaszlehetőség jó!"}),j&&e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-gray-800 text-white w-full",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:j.question}),e.jsx(L,{answers:x,onPick:w})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs("button",{onClick:p,className:`inline-flex items-center px-4 py-2 bg-orange-500 text-white \r
                  rounded-md hover:bg-orange-400 focus:outline-none focus:ring-2 focus:ring-orange-500`,children:[e.jsx(T,{className:"mr-2"}),"Következő kérdés"]}),e.jsxs("button",{onClick:()=>h(s=>!s),className:`inline-flex items-center px-4 py-2 rounded-md text-sm font-medium
                  focus:outline-none focus:ring-2 focus:ring-indigo-500 transition
                  ${o?"bg-red-600 hover:bg-red-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:[e.jsx(z,{className:"mr-2"}),o?"Időzítő kikapcsolása":"Időzítő bekapcsolása"]}),e.jsxs(f,{as:"div",className:"relative",children:[e.jsx("div",{children:e.jsxs(f.Button,{className:`inline-flex items-center px-4 py-2 rounded-md bg-gray-700 text-sm text-white\r
                    hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500`,children:[t," mp"]})}),e.jsx(y,{enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(f.Items,{className:"absolute left-1/2 transform -translate-x-1/2 mt-2 w-28 origin-top-center rounded-md bg-gray-800 shadow-lg ring-1 ring-black ring-opacity-5",children:e.jsx("div",{className:"py-1",children:[5,10,15,20,25,30].map(s=>e.jsx(f.Item,{children:({active:c})=>e.jsxs("button",{onClick:()=>{m(s),g(s)},className:`${c?"bg-gray-600 text-white":"text-gray-300"} flex w-full items-center justify-between px-4 py-2 text-sm`,children:[s," mp",t===s&&e.jsx(v,{className:"text-green-400 ml-2"})]})},s))})})})]})]}),o&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",N," másodperc múlva"]})]})]})]})}const K=q;export{K as component};
