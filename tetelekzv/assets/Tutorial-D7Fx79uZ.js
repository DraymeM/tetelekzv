import{r as d,j as o}from"./index-NwrGM-P6.js";import{a as E}from"./index-CsmsDMHc.js";const L=({open:h,onClose:v,steps:i})=>{const[r,f]=d.useState(0),[e,x]=d.useState(null),[j,p]=d.useState(!1),c=d.useRef(null),l=10,w=320,b=140,n=50;if(d.useEffect(()=>{if(h)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[h]),d.useEffect(()=>{if(!h){f(0),x(null),p(!1);return}const t=i[r],a=document.querySelector(t?.selector||"");if(c.current&&(document.removeEventListener("click",c.current),c.current=null),p(!t?.requiresInteraction),a){if(t?.requiresInteraction){const y=z=>{a.contains(z.target)&&p(!0)};document.addEventListener("click",y),c.current=y}a.scrollIntoView({behavior:"auto",block:"center",inline:"center"});const S=a.getBoundingClientRect();x(S)}else x(null);return()=>{c.current&&document.removeEventListener("click",c.current)}},[r,h,i]),!h||!e)return null;const N=e.top;let u=0,m="down";N>b+n+l?(u=e.top-l-b-n,m="down"):(u=e.bottom+l+n,m="up");let s=e.left;s+w>window.innerWidth-l&&(s=window.innerWidth-w-l),s<l&&(s=l);let g=e.left+e.width/2-s-n/2;g=Math.min(Math.max(g,n),w-n*2);const k=[{top:0,left:0,width:window.innerWidth,height:Math.max(0,e.top)},{top:e.top,left:0,width:Math.max(0,e.left),height:e.height},{top:e.top,left:e.right,width:Math.max(0,window.innerWidth-e.right),height:e.height},{top:e.bottom,left:0,width:window.innerWidth,height:Math.max(0,window.innerHeight-e.bottom)}];return o.jsxs(o.Fragment,{children:[k.map((t,a)=>t.width>0&&t.height>0&&o.jsx("div",{className:"fixed bg-black/60 pointer-events-auto",style:{top:t.top,left:t.left,width:t.width,height:t.height}},a)),o.jsxs("div",{className:"fixed z-[99999] w-[320px] border-border border-2 rounded-xl bg-secondary text-foreground shadow-2xl p-4 font-sans",style:{top:u,left:s},children:[o.jsx("h3",{className:"text-lg font-bold mb-2",children:i[r].title}),o.jsx("p",{className:"text-sm mb-4",children:i[r].content}),o.jsxs("div",{className:"flex justify-between gap-2",children:[o.jsx("button",{onClick:v,className:"px-3 py-1 rounded text-white hover:cursor-pointer bg-rose-700 hover:bg-rose-800 text-sm",children:"Kilépés"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{disabled:r===0,onClick:()=>f(t=>Math.max(t-1,0)),className:`px-3 py-1 rounded text-sm border border-gray-500 ${r===0?"opacity-50 cursor-not-allowed":"hover:bg-muted hover:cursor-pointer"}`,children:"Előző"}),o.jsx("button",{onClick:()=>{r===i.length-1?v():f(t=>t+1)},disabled:i[r].requiresInteraction&&!j,className:`px-3 py-1 rounded text-white text-sm ${i[r].requiresInteraction&&!j?"bg-gray-500 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 hover:cursor-pointer"}`,children:r===i.length-1?"Befejezés":"Következő"})]})]})]}),o.jsx("div",{className:`fixed z-[99999] text-white mt-5  ${m==="down"?"-rotate-90":"rotate-90"}`,style:{top:m==="down"?u+b:u-n,left:s+g,fontSize:`${n}px`},children:o.jsx(E,{size:n})})]})};export{L as default};
