const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ResultDialog-B8XR9pgL.js","assets/index-DNhYfZVa.js","assets/index-5GsZzLaf.css","assets/index-BTtXXIIr.js","assets/TimerSection-DXfriMJy.js","assets/TimerControls-DaLmgs-a.js","assets/menu-BZ1RMqro.js","assets/use-resolve-button-type-CJ4JSqJC.js","assets/bugs-Be33Z5lp.js","assets/label-CiAh7-40.js","assets/ResetButton-BSdEZKfw.js","assets/ScoreBoard-jKD9PXWV.js","assets/QuestionCard-CScMiYnJ.js","assets/AnswerPicker-C9IevmHh.js"])))=>i.map(i=>d[i]);
import{u as F,f as C,r as s,j as e,S as B,a as H,g as K,R as o,_ as l}from"./index-DNhYfZVa.js";import{u as N}from"./useQuery-B90wnf1T.js";import{h as M,g as W}from"./repo-I0R3ESGW.js";import{P as $}from"./PageTransition-CKedCoC9.js";import{O as Y}from"./OfflinePlaceholder-BfCSPmJv.js";import{u as G}from"./useOnlineStatus-CFArgxL8.js";import{u as J}from"./useTimer-BuaqZ4Nj.js";const U=o.lazy(()=>l(()=>import("./ResultDialog-B8XR9pgL.js"),__vite__mapDeps([0,1,2,3]))),X=o.lazy(()=>l(()=>import("./TimerSection-DXfriMJy.js"),__vite__mapDeps([4,1,2,5,6,7,8,9]))),Z=o.lazy(()=>l(()=>import("./ResetButton-BSdEZKfw.js"),__vite__mapDeps([10,1,2]))),ee=o.lazy(()=>l(()=>import("./ScoreBoard-jKD9PXWV.js"),__vite__mapDeps([11,1,2]))),te=o.lazy(()=>l(()=>import("./QuestionCard-CScMiYnJ.js"),__vite__mapDeps([12,1,2,13])));function de(){const{id:v}=F({strict:!1}),r=Number(v),E=C(),S=G(),[a,x]=s.useState(0),[g,p]=s.useState(0),[D,_]=s.useState(0),[L,h]=s.useState(0),[j,d]=s.useState(!1),[w,c]=s.useState(!1),{data:u,isLoading:z,error:b}=N({queryKey:["tetelQuestions",r],queryFn:()=>M({tetelId:r,page:1,limit:1e3}),enabled:!isNaN(r)&&r>0,staleTime:1e3*60*5,refetchOnWindowFocus:!1}),{data:y,isLoading:O,error:T}=N({queryKey:["multiQuestionDetails",u?.data[a]?.id],queryFn:()=>W(u.data[a].id),enabled:!!u?.data[a]?.id,staleTime:1e3*60*5,refetchOnWindowFocus:!1}),n=u?.data??[],{timerEnabled:k,setTimerEnabled:P,timerDuration:m,setTimerDuration:A,timeLeft:R,setTimeLeft:f}=J(()=>{a<n.length-1&&!j&&(x(t=>t+1),d(!1),f(m))},10),q=t=>{j||(_(i=>i+1),t?(p(i=>i+1),h(i=>i+1)):h(0),d(!0),a===n.length-1&&c(!0))},I=()=>{a<n.length-1?(x(t=>t+1),d(!1),f(m)):c(!0)},Q=()=>{x(0),p(0),_(0),h(0),d(!1),f(m),c(!1)},V=()=>{c(!1),E({to:"/tetelek/$id/questions",params:{id:r.toString()}})};return z||O?e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 text-center",children:e.jsx(B,{})})}):b||T?S?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"text-center mt-10 text-red-500",children:["Hiba: ",(b||T)?.message]})}):e.jsx(Y,{}):e.jsx(s.Suspense,{children:e.jsx($,{children:e.jsxs("div",{className:"text-center pt-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 px-4",children:[e.jsxs(H,{to:"/tetelek/$id",params:{id:r.toString()},className:"inline-flex items-center px-3 py-2 border border-border rounded-md text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground focus:outline-none focus:ring-2 focus:ring-primary transition-colors","aria-label":"Vissza a tételhez",title:"Vissza a tételhez",children:[e.jsx(K,{className:"mr-2","aria-hidden":"true"}),"Vissza"]}),e.jsx("h2",{className:"text-3xl font-bold",children:"Teszteld Magad"}),e.jsx("div",{className:"w-[100px]"})]}),n.length===0?e.jsx("p",{className:"p-4 bg-secondary shadow-md rounded-md transition text-foreground duration-300 border-transparent hover:border-muted-foreground border-2 cursor-pointer transform",children:"Nincsenek kérdések ehhez a tételhez."}):e.jsxs("main",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto p-4 text-center",children:[e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsx(ee,{score:g,questionsAnswered:D,streak:L}),e.jsx(te,{question:y?.question,answers:y?.answers??[],onPick:q}),e.jsx(X,{timerEnabled:k,setTimerEnabled:P,timerDuration:m,setTimerDuration:t=>{A(t),f(t)},timeLeft:R,onNext:I}),e.jsx(Z,{onClick:Q})]}),e.jsx(U,{isOpen:w,score:g,total:n.length,onClose:V})]})})})}export{de as T};
