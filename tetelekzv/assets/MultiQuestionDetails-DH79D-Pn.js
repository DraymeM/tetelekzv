const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeleteModal-ChKMxNxT.js","assets/index-DuvMzzmp.js","assets/index-n5F-86mG.css","assets/AnswerPicker-BcgzzEIl.js"])))=>i.map(i=>d[i]);
import{b as v,d as y,g as k,f as N,r as a,y as r,j as e,O as w,S as z,a as l,i as _,R as u,v as q,w as O,_ as d}from"./index-DuvMzzmp.js";import{u as E}from"./useLocation-Bb42sgA4.js";import{u as P}from"./useQuery-CPer4xJO.js";import{u as M}from"./useMutation-DaeFNXgV.js";import{i as S,j as D}from"./repo-BmuyZxB-.js";import{N as F}from"./Navbar-DaPk7GmS.js";import{P as Q}from"./PageTransition-BPF465Ok.js";import{O as A}from"./OfflinePlaceholder-DJ7NkqNv.js";import{u as L}from"./useOnlineStatus-Dn1mDNzd.js";const T=u.lazy(()=>d(()=>import("./DeleteModal-ChKMxNxT.js"),__vite__mapDeps([0,1,2]))),R=u.lazy(()=>d(()=>import("./AnswerPicker-BcgzzEIl.js"),__vite__mapDeps([3,1,2])));function J(){const{id:m}=v({strict:!1}),t=Number(m),c=E().pathname.includes("/edit"),x=L(),{isAuthenticated:i,isSuperUser:f}=y(),h=k(),p=N(),[j,n]=a.useState(!1),{data:s,isLoading:g,error:b}=P({queryKey:["multiQuestions",t],queryFn:()=>D(t),staleTime:1e3*60*5,refetchOnWindowFocus:!1}),o=M({mutationFn:()=>{if(!i)throw r.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!f)throw r.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return S(t)},onSuccess:()=>{p.invalidateQueries({queryKey:["multiQuestions"]}),r.success("Sikeresen törölted a kérdést."),h({to:"/mquestions"})},onError:()=>{}});return x?c?e.jsx(w,{}):g?e.jsx(z,{}):b||!s?e.jsx("div",{className:"p-10 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(Q,{children:e.jsxs(a.Suspense,{children:[e.jsxs(l,{to:"/mquestions",className:"inline-flex items-center px-3 py-2 border border-border mt-20 ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(_,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:s.question}),e.jsx(R,{answers:s.answers,onPick:()=>{}})]}),e.jsx(T,{isOpen:j,onClose:()=>n(!1),onDelete:()=>o.mutate(),isDeleting:o.isPending,itemName:s.question})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(l,{to:"/mquestions/$id/edit",params:{id:t.toString()},className:`fixed bottom-22 right-7 p-3 bg-blue-600 text-white rounded-full \r
                       hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(q,{size:20})}),e.jsx("button",{onClick:()=>n(!0),className:`fixed bottom-7 right-7 p-3 bg-rose-600 text-white rounded-full \r
                       hover:bg-rose-700 hover:cursor-pointer transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(O,{size:20})})]})]}):e.jsx(e.Fragment,{children:e.jsx(A,{})})}export{J as M};
