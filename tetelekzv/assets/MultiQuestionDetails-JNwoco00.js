const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeleteModal-DtlVnbdn.js","assets/index-NwrGM-P6.js","assets/index-LojOYYw_.css","assets/AnswerPicker-D_J-M1-M.js"])))=>i.map(i=>d[i]);
import{b as y,d as N,g as q,f as z,r as d,y as i,j as e,O as w,S as _,a as m,h as O,R as x,$ as E,a0 as P,_ as f}from"./index-NwrGM-P6.js";import{u as D}from"./useLocation-aud7jIJX.js";import{u as M}from"./useQuery-BXM0KwjG.js";import{u as F}from"./useMutation-Dztidm4_.js";import{i as Q,j as S}from"./repo-Esx1YiU5.js";import{N as c}from"./Navbar-hr4SqBrg.js";import{P as $}from"./PageTransition-DJKPOuyw.js";import{O as A}from"./OfflinePlaceholder-DAWkdWrj.js";import{u as I}from"./useOnlineStatus-BA9DVo6w.js";const L=x.lazy(()=>f(()=>import("./DeleteModal-DtlVnbdn.js"),__vite__mapDeps([0,1,2]))),T=x.lazy(()=>f(()=>import("./AnswerPicker-D_J-M1-M.js"),__vite__mapDeps([3,1,2])));function X(){const{id:t,qid:n}=y({from:"/tetelek/$id/questions/$qid"}),s=Number(n),h=D().pathname.includes("/edit"),p=I(),{isAuthenticated:o,isSuperUser:j}=N(),b=q(),a=z(),[g,l]=d.useState(!1),{data:r,isLoading:v,error:k}=M({queryKey:["multiQuestions",s],queryFn:()=>S(s),staleTime:1e3*60*5,refetchOnWindowFocus:!1}),u=F({mutationFn:()=>{if(!o)throw i.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!j)throw i.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return Q(s)},onSuccess:()=>{a.invalidateQueries({queryKey:["tetelQuestions"]}),a.invalidateQueries({queryKey:["multiQuestions",s]}),i.success("Sikeresen törölted a kérdést."),b({to:"/tetelek/$id/questions",params:{id:t}})},onError:()=>{}});return p?h?e.jsx(w,{}):v?e.jsx(_,{}):k||!r?e.jsx("div",{className:"p-10 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):!t||isNaN(Number(t))?e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx("div",{className:"p-10 text-center text-red-500",children:"Érvénytelen tétel ID"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{}),e.jsx($,{children:e.jsxs(d.Suspense,{children:[e.jsxs(m,{to:"/tetelek/$id/questions",params:{id:t},className:"inline-flex items-center px-3 py-2 border border-border mt-20 ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(O,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:r.question}),e.jsx(T,{answers:r.answers,onPick:()=>{}})]}),e.jsx(L,{isOpen:g,onClose:()=>l(!1),onDelete:()=>u.mutate(),isDeleting:u.isPending,itemName:r.question})]})}),o&&e.jsxs(e.Fragment,{children:[e.jsx(m,{to:"/tetelek/$id/questions/$qid/edit",params:{id:t,qid:n},className:`fixed bottom-20 right-7 p-3 bg-blue-600 text-white rounded-full \r
                       hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(E,{size:20})}),e.jsx("button",{onClick:()=>l(!0),className:`fixed bottom-7 right-7 p-3 bg-rose-600 text-white rounded-full \r
                       hover:bg-rose-700 hover:cursor-pointer transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(P,{size:20})})]})]}):e.jsx(A,{})}export{X as M};
