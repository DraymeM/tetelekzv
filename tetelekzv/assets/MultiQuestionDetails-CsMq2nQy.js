const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnswerPicker-BcD-LJja.js","assets/index-D30lV8bT.js","assets/index-C39-DJEV.css"])))=>i.map(i=>d[i]);
import{u as p,a as b,d as g,b as v,r as a,y as r,j as e,O as k,S as y,N,L as l,f as w,R as z,s as q,t as M,_ as D}from"./index-D30lV8bT.js";import{u as E,D as P}from"./DeleteModal-DlTDOADT.js";import{u as S}from"./useQuery-C7UikRoT.js";import{u as F}from"./useMutation-Cvujg8hd.js";import{i as _,j as O}from"./repo-n6Js79Nf.js";import{P as Q}from"./PageTransition-BtWOCA-0.js";const L=z.lazy(()=>D(()=>import("./AnswerPicker-BcD-LJja.js"),__vite__mapDeps([0,1,2])));function H(){const{id:u}=p({strict:!1}),s=Number(u),d=E().pathname.includes("/edit"),{isAuthenticated:i,isSuperUser:c}=b(),m=g(),x=v(),[h,n]=a.useState(!1),{data:t,isLoading:f,error:j}=S({queryKey:["multiQuestions",s],queryFn:()=>O(s),staleTime:1e3*60*5,refetchOnWindowFocus:!1}),o=F({mutationFn:()=>{if(!i)throw r.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!c)throw r.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return _(s)},onSuccess:()=>{x.invalidateQueries({queryKey:["multiQuestions"]}),r.success("Sikeresen törölted a kérdést."),m({to:"/mquestions"})},onError:()=>{}});return d?e.jsx(k,{}):f?e.jsx(y,{}):j||!t?e.jsx("div",{className:"p-10 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx(Q,{children:e.jsxs(a.Suspense,{children:[e.jsxs(l,{to:"/mquestions",className:"inline-flex items-center px-3 py-2 border border-border mt-20 ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(w,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:t.question}),e.jsx(L,{answers:t.answers,onPick:()=>{}})]}),e.jsx(P,{isOpen:h,onClose:()=>n(!1),onDelete:()=>o.mutate(),isDeleting:o.isPending,itemName:t.question})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(l,{to:"/mquestions/$id/edit",params:{id:s.toString()},className:`fixed bottom-22 right-7 p-3 bg-blue-600 text-white rounded-full \r
                       hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(q,{size:20})}),e.jsx("button",{onClick:()=>n(!0),className:`fixed bottom-7 right-7 p-3 bg-rose-600 text-white rounded-full \r
                       hover:bg-rose-700 hover:cursor-pointer transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(M,{size:20})})]})]})}export{H as M};
