import{u as z,r as b,j as e,W as f,N as T,L as q,ad as C,ac as L,J as j}from"./index-DNzlDc06.js";import{u as M}from"./useQuery-oESKNZM3.js";import{a as I}from"./index-cNbRpIzP.js";import{F as S}from"./FlashCard-CifrBg-h.js";function E(){var h,g;const{id:N}=z({strict:!1}),n=Number(N),{data:t,isLoading:v,error:m}=M({queryKey:["tetelDetail",n],queryFn:async()=>(await I.get(`/tetelekzv/BackEnd/get_tetel_details.php?id=${n}`)).data,enabled:!isNaN(n)&&n>0,retry:2,refetchOnWindowFocus:!1}),[i,x]=b.useState(!1),[a,p]=b.useState(0),l=(t==null?void 0:t.tetel)??{name:"Ismeretlen tétel"},o=t==null?void 0:t.osszegzes,w=(t==null?void 0:t.sections)??[],r=(t==null?void 0:t.questions)??[],c=r.length>0,u=r.length>=2,F=()=>{if(!u)return;let s=a;for(;s===a;)s=Math.floor(Math.random()*r.length);p(s)},k=()=>{c&&(p(Math.floor(Math.random()*r.length)),x(!0))};return v?e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("div",{className:"animate-spin text-blue-500 text-4xl inline-block",children:e.jsx(f,{})}),e.jsx("p",{className:"mt-4 text-gray-400",children:"Tétel betöltése..."})]}):m?e.jsxs("div",{className:"p-10 text-red-500 text-center",children:["Hiba történt: ",m.message]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs("main",{className:"relative max-w-6xl mx-auto min-h-screen mt-10 p-10 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs(q,{to:"/tetelek",className:`inline-flex items-center px-3 py-2 border border-gray-300 rounded-md\r
                     text-sm font-medium text-gray-400 hover:bg-gray-500 hover:text-white\r
                     focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors`,children:[e.jsx(C,{className:"mr-2"}),"Vissza a tételekhez"]}),!i&&c&&e.jsxs("button",{onClick:k,className:`inline-flex items-center px-4 py-2 bg-purple-600 border-purple-500 \r
                       rounded-md text-sm font-medium text-white hover:bg-purple-700 \r
                       focus:outline-none focus:ring-2 focus:ring-purple-500 transition-colors`,children:[e.jsx(L,{className:"mr-2"}),"Tanuló mód indítása"]})]}),e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center text-gray-100",children:l==null?void 0:l.name}),e.jsx(j,{show:!i,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsxs("div",{className:"space-y-6",children:[w.map(s=>{var y;return e.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 shadow-xl border border-gray-700\r
                         hover:border-gray-500 transition-colors`,children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-100",children:s.content}),(y=s.subsections)==null?void 0:y.map(d=>e.jsxs("div",{className:"ml-4 mb-4 p-4 bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-100 mb-2",children:d.title}),e.jsx("p",{className:"text-gray-300",children:d.description})]},d.id))]},s.id)}),(o==null?void 0:o.content)&&e.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-100",children:"Összegzés"}),e.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:o.content})]})]})}),e.jsx(j,{show:i,enter:"transition-opacity duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"flex flex-col items-center gap-6 mt-10",children:c&&e.jsxs(e.Fragment,{children:[e.jsx(S,{question:((h=r[a])==null?void 0:h.question)??"",answer:((g=r[a])==null?void 0:g.answer)??""}),e.jsxs("div",{className:"flex gap-4",children:[u&&e.jsxs("button",{onClick:F,className:`px-6 py-3 bg-blue-600 text-white rounded-lg\r
                               hover:bg-blue-700 transition-colors flex items-center`,children:[e.jsx(f,{className:"mr-2 animate-spin"}),"Következő kérdés"]}),e.jsx("button",{onClick:()=>x(!1),className:`px-6 py-3 border border-gray-400 text-gray-300\r
                             rounded-lg hover:bg-gray-700 transition-colors`,children:"Vissza"})]})]})})})]})]})}const K=E;export{K as component};
