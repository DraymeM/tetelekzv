import{a as E,e as F,r as a,j as e,y as f}from"./index-D11hHrFM.js";import{z as c,F as P,S as B}from"./SubmitButton-YusVFIWz.js";import{I as j}from"./InputField-DYFnfLkC.js";const K=()=>{const{login:x}=E(),z=F(),[l,b]=a.useState(""),[i,d]=a.useState(""),[w,u]=a.useState(!1),[m,g]=a.useState({}),[t,n]=a.useState({}),S=c.object({username:c.string().min(1,"Kötelező mező"),password:c.string().min(1,"Kötelező mező")}),y=async s=>{var p,v;s.preventDefault(),u(!0),n({username:!0,password:!0});const h=S.safeParse({username:l,password:i});if(!h.success){const o={};h.error.issues.forEach(r=>{o[r.path[0]]=r.message}),g(o),u(!1);return}try{await x(l,i),f.success("Sikeres bejelentkezés!"),z({to:"/"})}catch(o){const r=((v=(p=o.response)==null?void 0:p.data)==null?void 0:v.error)||"Bejelentkezési hiba",k=r==="Invalid credentials"?"Hibás felhasználónév vagy jelszó":r;f.error(k)}finally{u(!1),d(""),g({}),n({})}};return e.jsx("div",{children:e.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen py-50 justify-center overflow-hidden",children:e.jsx(P,{error:null,success:null,label:"Bejelentkezés",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx(j,{label:"Felhasználónév",value:l,onChange:s=>{b(s.target.value),n({...t,username:!0})},error:t.username?m.username:void 0}),e.jsx(j,{label:"Jelszó",value:i,onChange:s=>{d(s.target.value),n({...t,password:!0})},enablePasswordToggle:!0,error:t.password?m.password:void 0}),e.jsx(B,{isPending:w,label:"Bejelentkezés"})]})})})})};export{K as L};
