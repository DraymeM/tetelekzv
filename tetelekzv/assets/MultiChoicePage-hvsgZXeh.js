import{e as S,r as s,j as e,S as z,a as C,g as Q,z as h,h as q,i as A,k as P,l as E}from"./index-C-kZPjOI.js";import{u as L}from"./useQuery-B2b2W5pS.js";import M from"./AnswerPicker-D6Dq6kXf.js";import{u as O,T as R}from"./useTimer-BR4h9Ntr.js";import{a as K}from"./repo-BMneEDCF.js";import{O as D}from"./OfflinePlaceholder-Jf17uAvg.js";import{u as V}from"./useOnlineStatus-CJTOGzvX.js";import{P as H}from"./PageTransition-tmT-SZGH.js";function Z(){const p=S(),{data:t,isLoading:o,error:d}=L({queryKey:["randomMultiQuestion"],queryFn:K,retry:2,refetchOnWindowFocus:!1}),j=V(),[g,m]=s.useState(0),[y,c]=s.useState(0),[N,i]=s.useState(0),[b,l]=s.useState(!1),{timerEnabled:x,setTimerEnabled:v,timerDuration:u,setTimerDuration:w,timeLeft:k,setTimeLeft:f}=O(a,10);function a(){p.invalidateQueries({queryKey:["randomMultiQuestion"]}),f(u),l(!1)}s.useEffect(()=>{!t&&!o&&a()},[t,o]);const F=n=>{b||(c(r=>r+1),n?(m(r=>r+1),i(r=>r+1)):i(0),l(!0))},T=()=>{m(0),c(0),i(0),l(!1),a()};return j?o?e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 text-center",children:e.jsx(z,{})})}):d?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",d.message]}):!t||"error"in t?e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 text-center text-muted-foreground",children:"No questions available."})}):e.jsx(e.Fragment,{children:e.jsx(s.Suspense,{children:e.jsxs(H,{children:[e.jsxs(C,{to:"/tetelek",className:`inline-flex items-center px-3 py-2 border border-border  md:ml-10 ml-1 rounded-md\r
                               text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground\r
                               focus:outline-none focus:ring-2 focus:ring-primary transition-colors`,children:[e.jsx(Q,{className:"mr-2"}),"Vissza a tételekhez"]}),e.jsxs("main",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsx(h,{as:s.Fragment,show:!0,appear:!0,enter:"transition ease-out duration-500",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-300",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsxs("div",{className:"flex flex-row gap-6 mb-6 text-muted-foreground text-sm justify-center",children:[e.jsxs("div",{className:"flex items-center md:gap-2 bg-green-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(q,{className:"text-green-500"}),e.jsxs("span",{className:"text-foreground",children:["Válaszok:"," ",e.jsx("span",{className:"font-semibold text-green-500",children:g})]})]}),e.jsxs("div",{className:"flex items-center md:gap-2 bg-blue-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(A,{className:"text-blue-500"}),e.jsxs("span",{className:"text-foreground",children:["Kérdések:"," ",e.jsx("span",{className:"font-semibold text-blue-500",children:y})]})]}),e.jsxs("div",{className:"flex items-center md:gap-2 bg-yellow-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(P,{className:"text-yellow-500"}),e.jsxs("span",{className:"text-foreground",children:["Sorozat:"," ",e.jsx("span",{className:"font-semibold text-yellow-500",children:N})]})]})]})}),e.jsx(h,{as:s.Fragment,show:!!t,enter:"transition ease-out duration-500 transform",enterFrom:"opacity-0 translate-x-4",enterTo:"opacity-100 translate-x-0",leave:"transition ease-in duration-300 transform",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 translate-x-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-secondary text-foreground w-full overflow-auto max-h-[80vh] shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:t.question}),e.jsx(M,{answers:t.answers,onPick:F})]}),e.jsx(R,{onNext:a,timerEnabled:x,setTimerEnabled:v,timerDuration:u,setTimerDuration:n=>{w(n),f(n)}}),x&&e.jsxs("div",{className:"text-foreground text-md mt-4",children:["Következő kérdés ",k," másodperc múlva"]}),e.jsxs("button",{className:"mt-1 px-6 py-3 rounded bg-red-600 hover:bg-red-700 text-white transition-all transform hover:cursor-pointer flex items-center gap-2",onClick:T,children:[e.jsx(E,{}),"Újrakezdés"]})]})})]})]})})}):e.jsx(e.Fragment,{children:e.jsx(D,{})})}export{Z as M};
