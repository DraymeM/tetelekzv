import{u as p,a as j,e as b,d as g,r as N,y as r,j as e,O as k,S as y,N as q,L as a,g as v,Z as w,a0 as z}from"./index-MfXWJZRy.js";import{u as M,D as S}from"./DeleteModal-DEi1rPJG.js";import{u as D}from"./useQuery-Dld_li1V.js";import{u as E}from"./useMutation-C8t57buJ.js";import{i as F,j as Q}from"./repo-WJTK3AE9.js";import{A}from"./AnswerPicker-LTDLj0lp.js";import"./utils-km2FGkQ4.js";function C(){const{id:l}=p({strict:!1}),t=Number(l),u=M().pathname.includes("/edit"),{isAuthenticated:n,isSuperUser:d}=j(),m=b(),c=g(),[x,i]=N.useState(!1),{data:s,isLoading:f,error:h}=D({queryKey:["multiQuestions",t],queryFn:()=>Q(t),enabled:!isNaN(t)}),o=E({mutationFn:()=>{if(!n)throw r.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!d)throw r.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return F(t)},onSuccess:()=>{c.invalidateQueries({queryKey:["multiQuestions"]}),r.success("Sikeresen törölted a kérdést."),m({to:"/mquestions"})},onError:()=>{}});return u?e.jsx(k,{}):f?e.jsx(y,{}):h||!s?e.jsx("div",{className:"p-10 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsxs(a,{to:"/mquestions",className:"inline-flex items-center px-3 py-2 border border-border mt-20 ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(v,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:s.question}),e.jsx(A,{answers:s.answers,onPick:()=>{}})]}),e.jsx(S,{isOpen:x,onClose:()=>i(!1),onDelete:()=>o.mutate(),isDeleting:o.isPending,itemName:s.question}),n&&e.jsxs(e.Fragment,{children:[e.jsx(a,{to:"/mquestions/$id/edit",params:{id:t.toString()},className:`fixed bottom-22 right-7 p-3 bg-blue-600 text-white rounded-full \r
                       hover:bg-blue-700 transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(w,{size:20})}),e.jsx("button",{onClick:()=>i(!0),className:`fixed bottom-7 right-7 p-3 bg-rose-600 text-white rounded-full \r
                       hover:bg-rose-700 transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(z,{size:20})})]})]})}const U=C;export{U as component};
