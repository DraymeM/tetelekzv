const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-e92Wkx_N.js","assets/index-CjHgB-9B.js","assets/index-CwiyTVBM.css","assets/InputField-CPjSDRa9.js","assets/SubmitButton-C6gTFPp6.js"])))=>i.map(i=>d[i]);
import{f as L,r as s,j as e,z as x,L as b,R as h,_ as z,y as n}from"./index-CjHgB-9B.js";import{r as I}from"./repo-CMdqNkwN.js";import{u as D}from"./useOnlineStatus-BHyzc8OP.js";import{O as V}from"./OfflinePlaceholder-BRjtviK7.js";import{P as Z}from"./PageTransition-CV3Y8buX.js";import{o as $,s as u}from"./types-CZYGTQuY.js";const J=h.lazy(()=>z(()=>import("./FormContainer-e92Wkx_N.js"),__vite__mapDeps([0,1,2]))),d=h.lazy(()=>z(()=>import("./InputField-CPjSDRa9.js"),__vite__mapDeps([3,1,2]))),U=h.lazy(()=>z(()=>import("./SubmitButton-C6gTFPp6.js"),__vite__mapDeps([4,1,2]))),Q=()=>{const k=D(),E=L(),[T]=s.useState(!0),[f,w]=s.useState(""),[g,j]=s.useState(""),[p,P]=s.useState(""),[y,_]=s.useState(""),[A,F]=s.useState(null),[R,S]=s.useState(null),[C,v]=s.useState(!1),[l,m]=s.useState({}),[c,o]=s.useState({}),N=$({username:u().min(3,"Legalább 3 karakter").max(32).regex(/^[a-zA-Z0-9_]+$/,"Csak betűk, számok és aláhúzás (_) megengedett"),email:u().min(5).max(254).email("Érvényes email cím szükséges"),password:u().min(8).max(30).regex(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{8,}$/,"A jelszónak tartalmaznia kell betűt és számot"),confirmPassword:u()}).refine(r=>r.password===r.confirmPassword,{message:"Nem egyeznek a jelszavak!",path:["confirmPassword"]}),O=async r=>{r.preventDefault(),F(null),S(null),v(!0),o({username:!0,email:!0,password:!0,confirmPassword:!0});const a=N.safeParse({username:f,email:g,password:p,confirmPassword:y});if(!a.success){const t={};a.error.issues.forEach(i=>{t[i.path[0]]=i.message}),m(t),v(!1);return}try{await I(f,g,p),S("Sikeres Regisztráció!"),n.success("Sikeres regisztráció!"),w(""),j(""),P(""),_(""),m({}),o({}),E({to:"/login"})}catch(t){t.response?.status===409?t.response.data.error.includes("Email")?(m(i=>({...i,email:"Az email cím már foglalt"})),n.error("Az email cím már foglalt")):t.response.data.error.includes("Username")?(m(i=>({...i,username:"A felhasználónév már foglalt"})),n.error("A felhasználónév már foglalt")):n.error(t.response.data.error||"Nem sikerült a regisztráció!"):n.error("Nem sikerült a regisztráció!")}finally{v(!1)}};return k?e.jsx(x,{appear:!0,show:T,as:s.Fragment,children:e.jsxs(b,{as:"div",className:"relative z-50",onClose:()=>{},children:[e.jsx(x.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-40",leave:"ease-in duration-200",leaveFrom:"opacity-40",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-background"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(x.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx(b.Panel,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl text-left align-middle transition-all",children:e.jsx(s.Suspense,{children:e.jsx(Z,{children:e.jsx(J,{error:A,success:R,label:"Regisztráció",children:e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsx(d,{id:"username",label:"Felhasználónév",value:f,onChange:r=>{w(r.target.value),o(a=>({...a,username:!0}))},error:c.username?l.username:void 0}),e.jsx(d,{id:"email",label:"Email",value:g,onChange:r=>{j(r.target.value),o(a=>({...a,email:!0}))},error:c.email?l.email:void 0}),e.jsx(d,{id:"password",label:"Jelszó",value:p,onChange:r=>{P(r.target.value),o(a=>({...a,password:!0}))},enablePasswordToggle:!0,error:c.password?l.password:void 0}),e.jsx(d,{id:"confirmPassword",label:"Jelszó megerősítése",value:y,onChange:r=>{_(r.target.value),o(a=>({...a,confirmPassword:!0}))},enablePasswordToggle:!0,error:c.confirmPassword?l.confirmPassword:void 0}),e.jsx(U,{isPending:C,label:"Regisztráció"})]})})})})})})})})]})}):e.jsx(V,{})};export{Q as R};
