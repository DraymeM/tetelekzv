const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeleteModal-11AAEr5Z.js","assets/index-KVBsG1ou.js","assets/index-DCi6IH1O.css","assets/AnswerPicker-Ce1PB6lr.js"])))=>i.map(i=>d[i]);
import{u as k,b as y,f as q,e as N,r as c,y as o,j as e,S as z,O as w,a,g as _,R as h,aI as P,aJ as x,_ as f}from"./index-KVBsG1ou.js";import{u as D}from"./useLocation-D1n-GyGL.js";import{u as E}from"./useQuery-Dc0WeW7-.js";import{u as F}from"./useMutation-9eyMPvLK.js";import{e as M,g as O}from"./repo-DMQTQuIf.js";import{P as Q}from"./PageTransition-CvYOJTXM.js";import{O as S}from"./OfflinePlaceholder-BS0FVtr2.js";const $=h.lazy(()=>f(()=>import("./DeleteModal-11AAEr5Z.js"),__vite__mapDeps([0,1,2]))),A=h.lazy(()=>f(()=>import("./AnswerPicker-Ce1PB6lr.js"),__vite__mapDeps([3,1,2])));function J(){const{id:t,qid:i}=k({from:"/tetelek/$id/questions/$qid"}),s=Number(i),p=D().pathname.includes("/edit"),{isAuthenticated:n,isSuperUser:l}=y(),j=q(),d=N(),[b,u]=c.useState(!1),{data:r,isLoading:g,error:v}=E({queryKey:["multiQuestions",s],queryFn:()=>O(s),staleTime:1e3*60*5,refetchOnWindowFocus:!1,retry:2}),m=F({mutationFn:()=>{if(!n)throw o.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!l)throw o.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return M(s)},onSuccess:()=>{d.invalidateQueries({queryKey:["tetelQuestions"]}),d.invalidateQueries({queryKey:["multiQuestions",s]}),o.success("Sikeresen törölted a kérdést."),j({to:"/tetelek/$id/questions",params:{id:t}})}});return g?e.jsx(z,{}):v?navigator.onLine?e.jsx("div",{className:"p-10 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):e.jsx(S,{}):p?e.jsx(w,{}):!t||isNaN(Number(t))?e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 text-center text-red-500",children:"Érvénytelen tétel ID"})}):r?e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsxs(c.Suspense,{children:[e.jsxs(a,{to:"/tetelek/$id/questions",params:{id:t},className:"inline-flex items-center px-3 py-2 border border-border ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(_,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:r.question}),e.jsx(A,{answers:r.answers,onPick:()=>{}})]}),e.jsx($,{isOpen:b,onClose:()=>u(!1),onDelete:()=>m.mutate(),isDeleting:m.isPending,itemName:r.question})]})}),n&&l?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>u(!0),className:`fixed md:bottom-2 bottom-14 right-2 p-3 bg-rose-600 text-white rounded-full \r
                 hover:bg-rose-700 hover:cursor-pointer transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(P,{size:20})}),e.jsx(a,{to:"/tetelek/$id/questions/$qid/edit",params:{id:t,qid:i},className:`fixed md:bottom-16 bottom-28 right-2 p-3 bg-blue-600 text-white rounded-full \r
                 hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(x,{size:20})})]}):n?e.jsx(a,{to:"/tetelek/$id/questions/$qid/edit",params:{id:t,qid:i},className:`fixed md:bottom-2 bottom-14 right-2 p-3 bg-blue-600 text-white rounded-full \r
               hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(x,{size:20})}):null]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 text-center text-red-500",children:"A kérdés nem található."})})}export{J as M};
