const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-Z7QUG0pO.js","assets/index-DgEvQsrA.js","assets/index-CK5AGBEG.css","assets/InputField-CpUHhWo0.js","assets/SubmitButton-BnRpfG0s.js"])))=>i.map(i=>d[i]);
import{g as O,r,j as e,R as d,_ as f,y as b}from"./index-DgEvQsrA.js";import{r as C}from"./repo-DbvhagVk.js";import{O as I}from"./OfflinePlaceholder-D4Yy2OQ3.js";import{u as L}from"./useOnlineStatus--JkohFxV.js";import{o as N,s as u}from"./types-CZYGTQuY.js";const D=d.lazy(()=>f(()=>import("./FormContainer-Z7QUG0pO.js"),__vite__mapDeps([0,1,2]))),m=d.lazy(()=>f(()=>import("./InputField-CpUHhWo0.js"),__vite__mapDeps([3,1,2]))),F=d.lazy(()=>f(()=>import("./SubmitButton-BnRpfG0s.js"),__vite__mapDeps([4,1,2]))),G=()=>{const j=O(),[n,g]=r.useState(""),[i,p]=r.useState(""),[w,P]=r.useState(""),[E,v]=r.useState(null),[y,h]=r.useState(null),[R,l]=r.useState(!1),[c,x]=r.useState({}),[a,t]=r.useState({}),k=L(),z=N({username:u().min(3,"Legalább 3 karakter"),password:u().min(6,"Legalább 6 karakter"),confirmPassword:u()}).refine(s=>s.password===s.confirmPassword,{message:"Nem egyeznek a jelszavak!",path:["confirmPassword"]}),T=async s=>{s.preventDefault(),v(null),h(null),l(!0),t({username:!0,password:!0,confirmPassword:!0});const _=z.safeParse({username:n,password:i,confirmPassword:w});if(!_.success){const o={};_.error.issues.forEach(S=>{o[S.path[0]]=S.message}),x(o),l(!1);return}try{await C(n,i),h("Sikeres Regiszráció!"),b.success("Sikeres regisztráció!"),g(""),p(""),P(""),x({}),t({}),j({to:"/login"})}catch(o){v(o instanceof Error?o.message:"Registration failed"),b.error("Nems sikerült a regisztráció!")}finally{l(!1)}};return k?e.jsx(r.Suspense,{children:e.jsx("div",{children:e.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen pb-55 pt-30 justify-center overflow-hidden",children:e.jsx(D,{error:E,success:y,label:"Register",children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsx(m,{label:"Username",value:n,onChange:s=>{g(s.target.value),t({...a,username:!0})},error:a.username?c.username:void 0}),e.jsx(m,{label:"Password",value:i,onChange:s=>{p(s.target.value),t({...a,password:!0})},enablePasswordToggle:!0,error:a.password?c.password:void 0}),e.jsx(m,{label:"Confirm Password",value:w,onChange:s=>{P(s.target.value),t({...a,confirmPassword:!0})},enablePasswordToggle:!0,error:a.confirmPassword?c.confirmPassword:void 0}),e.jsx(F,{isPending:R,label:"Register"})]})})})})}):e.jsx(e.Fragment,{children:e.jsx(I,{})})};export{G as R};
