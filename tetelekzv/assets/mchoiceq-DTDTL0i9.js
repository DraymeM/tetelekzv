import{r as l,j as e,a as E,G as A,D as L,E as M,J as q,N as I,B as P,M as R,P as Q,T as D,L as B,V as K}from"./index-B_u5r9M_.js";import{u as V}from"./useQuery-Tv21ZQDc.js";import{a as _}from"./index-cNbRpIzP.js";import{u as G,T as H}from"./useTimer-CzOBi_Nk.js";function J({answers:s,onPick:n}){const[t,r]=l.useState(null),[m,x]=l.useState(!1),[u,d]=l.useState(!0);l.useEffect(()=>{d(!0),r(null),x(!1);const a=setTimeout(()=>{d(!1)},300);return()=>clearTimeout(a)},[s]);const f=a=>{m||u||(r(a),x(!0),n(s[a].isCorrect))};return u?e.jsx("div",{className:"flex justify-center items-center min-h-[200px]",children:e.jsx(E,{className:"animate-spin text-blue-400 text-5xl"})}):e.jsx(A,{as:"div",appear:!0,show:!0,enter:"transition-all duration-500",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",children:e.jsx("div",{className:"flex flex-col gap-4",children:s.map((a,c)=>e.jsx("button",{onClick:()=>f(c),className:`w-full px-4 py-3 rounded-lg font-medium transition hover:cursor-pointer text-left shadow
              ${m?a.isCorrect?"bg-green-600 text-white":t===c?"bg-red-600 text-white":"bg-gray-700 text-white":"bg-gray-700 hover:bg-gray-600 text-white"}
            `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:a.text}),m&&a.isCorrect&&e.jsx(L,{className:"text-green-300 ml-3"}),m&&t===c&&!a.isCorrect&&e.jsx(M,{className:"text-red-300 ml-3"})]})},c))})})}async function $(){return(await _.get("/tetelekzv/BackEnd/get_multiquestion.php")).data}function O(s){const n=s.slice();for(let t=n.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[n[t],n[r]]=[n[r],n[t]]}return n}function U(){const{data:s,isLoading:n,error:t}=V({queryKey:["multiQuestions"],queryFn:$}),[r,m]=l.useState(null),[x,u]=l.useState([]),[d,f]=l.useState(0),[a,c]=l.useState(0),[y,p]=l.useState(0),{timerEnabled:j,setTimerEnabled:w,timerDuration:g,setTimerDuration:k,timeLeft:S,setTimeLeft:b}=G(h,10);function h(){if(!s||s.length===0)return;let i=s.map((v,F)=>F);r!==null&&s.length>1&&(i=i.filter(v=>v!==r));const o=i[Math.floor(Math.random()*i.length)];m(o),b(g);const z=O(s[o].answers);u(z)}if(l.useEffect(()=>{s&&r===null&&h()},[s]),n)return e.jsx(q,{});if(t instanceof Error)return e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",t.message]});const N=r!==null?(s??[])[r]:null,C=i=>{c(o=>o+1),i?(f(o=>o+1),p(o=>o+1)):p(0)},T=()=>{f(0),c(0),p(0),h()};return e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs("main",{className:"flex flex-col items-center justify-center min-h-screen mt-5 max-w-4xl mx-auto p-4 text-center ",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-gray-300",children:"Csak egy válaszlehetőség jó!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 text-gray-400 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"text-green-500"}),e.jsxs("span",{children:["Helyes válaszok: ",e.jsx("span",{className:"font-semibold",children:d})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"text-blue-500"}),e.jsxs("span",{children:["Megválaszolt kérdések:"," ",e.jsx("span",{className:"font-semibold",children:a})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"text-yellow-500"}),e.jsxs("span",{children:["Sorozat: ",e.jsx("span",{className:"font-semibold",children:y})]})]})]}),N&&e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-lg bg-gray-800 text-white w-full overflow-auto max-h-[80vh]",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:N.question}),e.jsx(J,{answers:x,onPick:C})]}),e.jsx(H,{onNext:h,timerEnabled:j,setTimerEnabled:w,timerDuration:g,setTimerDuration:i=>{k(i),b(i)}}),j&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",S," másodperc múlva"]}),e.jsxs("button",{className:"mt-8 px-6 py-3 rounded bg-red-600 hover:bg-red-700 transition-all transform hover:scale-105 flex items-center gap-2",onClick:T,children:[e.jsx(D,{}),"Újrakezdés"]})]}),e.jsx(B,{to:"/pmchq",className:"fixed bottom-7 right-7 p-4 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-all transform hover:scale-105 flex items-center justify-center",title:"Adj hozzá saját kérdést",children:e.jsx(K,{size:24})})]})]})}const ee=U;export{ee as component};
