const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TetelForm-KaGHYtJr.js","assets/index-CcgwBqJ8.js","assets/index-CHYqi3PZ.css","assets/index-mSkvzYyn.js","assets/MarkdownHandler-Dojq23Qn.js","assets/FlashCard-Cjfov8xy.js","assets/InputField-DS0_v7lA.js","assets/PageTransition-DQrU03lL.js"])))=>i.map(i=>d[i]);
import{a as S,f as z,e as N,r,j as s,S as d,R as T,_ as k}from"./index-CcgwBqJ8.js";import{u as _}from"./useQuery-CPPNeXKm.js";import{u as E}from"./useMutation-NyWmaYyF.js";import{k as P,h as q}from"./repo-BcJvpRJZ.js";import{N as D}from"./Navbar-Dl1heMU1.js";import{P as C}from"./PageTransition-DQrU03lL.js";import"./utils-km2FGkQ4.js";import"./link-gbpF_jv7.js";import"./index-C1ZKtdgo.js";const F=T.lazy(()=>k(()=>import("./TetelForm-KaGHYtJr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),R=()=>{var m;const{id:p}=S({strict:!1}),o=Number(p),f=z(),x=N(),[b,l]=r.useState(null),[g,c]=r.useState(null),[j,a]=r.useState(!1),{data:e,isLoading:h}=_({queryKey:["tetelDetail",o],queryFn:()=>q(o),enabled:!isNaN(o)}),u=E({mutationFn:t=>P(o,t),onMutate:()=>{a(!0)},onSuccess:()=>{x.invalidateQueries({queryKey:["tetelDetail",o]}),c("Sikeres frissítés!"),setTimeout(()=>{c(null),f({to:`/tetelek/${o}`}),a(!1)},2e3)},onError:t=>{var i,n;l(((n=(i=t.response)==null?void 0:i.data)==null?void 0:n.error)||"Hiba a frissítés közben."),a(!1)}}),v=t=>{l(null),u.mutate({...t,sections:t.sections.map(i=>({...i,subsections:i.subsections.map(n=>({...n,id:n.id&&n.id<0?void 0:n.id}))})),flashcards:t.flashcards.map(i=>({...i,id:i.id&&i.id<0?void 0:i.id}))})};if(h)return s.jsx("div",{className:"p-10 text-center text-gray-300",children:s.jsx(d,{})});const y={name:(e==null?void 0:e.tetel.name)||"",osszegzes:((m=e==null?void 0:e.osszegzes)==null?void 0:m.content)||"",sections:(e==null?void 0:e.sections.map(t=>({...t,subsections:t.subsections||[]})))||[{content:"",subsections:[]}],flashcards:(e==null?void 0:e.questions)||[]};return s.jsxs(s.Fragment,{children:[s.jsx(D,{}),s.jsx(C,{children:s.jsx(r.Suspense,{children:s.jsxs("div",{className:"relative",children:[j&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"rgba(25, 25, 30, 0.3)"},children:s.jsx(d,{})}),s.jsx(F,{initialData:y,onSubmit:v,isPending:u.isPending,error:b,success:g,label:"Tétel szerkesztése",submitLabel:"Tétel mentése"})]})})})]})},V=R;export{V as component};
