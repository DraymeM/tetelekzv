const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormContainer-3aKEaWuq.js","assets/index-CHOBRNO2.js","assets/index-Cr4-NZrg.css","assets/InputField-LFxcE_CH.js","assets/SubmitButton-D72ZWoqY.js"])))=>i.map(i=>d[i]);
import{d as P,g as k,r as s,j as e,R as u,a as O,_ as d,y as f}from"./index-CHOBRNO2.js";import{O as R}from"./OfflinePlaceholder-GdTWcXsg.js";import{u as T}from"./useOnlineStatus-CCoqJuOt.js";import{o as I,s as g}from"./types-CZYGTQuY.js";const L=u.lazy(()=>d(()=>import("./FormContainer-3aKEaWuq.js"),__vite__mapDeps([0,1,2]))),j=u.lazy(()=>d(()=>import("./InputField-LFxcE_CH.js"),__vite__mapDeps([3,1,2]))),N=u.lazy(()=>d(()=>import("./SubmitButton-D72ZWoqY.js"),__vite__mapDeps([4,1,2]))),C=()=>{const{login:x}=P(),_=k(),[l,z]=s.useState(""),[i,m]=s.useState(""),[b,c]=s.useState(!1),[p,h]=s.useState({}),[a,n]=s.useState({}),y=T(),S=I({username:g().min(1,"Kötelező mező"),password:g().min(1,"Kötelező mező")}),w=async t=>{t.preventDefault(),c(!0),n({username:!0,password:!0});const v=S.safeParse({username:l,password:i});if(!v.success){const o={};v.error.issues.forEach(r=>{o[r.path[0]]=r.message}),h(o),c(!1);return}try{await x(l,i),f.success("Sikeres bejelentkezés!"),_({to:"/"})}catch(o){const r=o.response?.data?.error||"Bejelentkezési hiba",E=r==="Invalid credentials"?"Hibás felhasználónév vagy jelszó":r;f.error(E)}finally{c(!1),m(""),h({}),n({})}};return y?e.jsx(s.Suspense,{children:e.jsx("div",{children:e.jsx("div",{className:"max-w-2xl mx-auto items-center h-screen pb-50 pt-35 justify-center overflow-hidden",children:e.jsx(L,{error:null,success:null,label:"Bejelentkezés",children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsx(j,{label:"Felhasználónév",value:l,onChange:t=>{z(t.target.value),n({...a,username:!0})},error:a.username?p.username:void 0}),e.jsx(j,{label:"Jelszó",value:i,onChange:t=>{m(t.target.value),n({...a,password:!0})},enablePasswordToggle:!0,error:a.password?p.password:void 0}),e.jsx(N,{isPending:b,label:"Bejelentkezés"}),e.jsx("div",{className:"text-left mt-2",children:e.jsx(O,{to:"/register",className:"text-md text-teal-400 hover:underline",children:"Nincs fiókod? Regisztrálj"})})]})})})})}):e.jsx(e.Fragment,{children:e.jsx(R,{})})};export{C as L};
