const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Sidebar-CzqU64mm.js","assets/index-olnGjB74.js","assets/index-BOlfXB0R.css","assets/index-k_N4RCAa.js","assets/Navbar-ODnhT9L7.js","assets/link-DVucSle3.js","assets/index-B8DyzG5r.js","assets/repo-VB8zIIGh.js","assets/index-ByYdXFAB.js","assets/FormContainer-DfKnSRpd.js","assets/InputField-C8kMXtBe.js","assets/SubmitButton-CE3tOUXW.js","assets/PageTransition-CJHyo5J0.js","assets/use-resolve-button-type-DNc-C8i_.js","assets/UserInfo-BJ0JzLIK.js"])))=>i.map(i=>d[i]);
import{r as n,x as Pe,R as A,A as ae,B as ve,K as G,C as U,D as q,E as D,T as H,G as he,H as I,P as R,I as S,J as N,L as we,M as le,N as J,Q as K,U as L,V as se,j as c,b as Te,f as Ie,W as Se,_ as oe,g as ne}from"./index-olnGjB74.js";import{N as je}from"./Navbar-ODnhT9L7.js";import{u as ye}from"./repo-VB8zIIGh.js";import{z as V}from"./index-ByYdXFAB.js";import Ee from"./FormContainer-DfKnSRpd.js";import Q from"./InputField-C8kMXtBe.js";import $e from"./SubmitButton-CE3tOUXW.js";import{P as ke}from"./PageTransition-CJHyo5J0.js";import{$ as ue,a as Ae,w as Ce,e as Fe}from"./use-resolve-button-type-DNc-C8i_.js";function ze({onFocus:e}){let[t,r]=n.useState(!0),s=Pe();return t?A.createElement(ae,{as:"button",type:"button",features:ve.Focusable,onFocus:o=>{o.preventDefault();let l,a=50;function i(){if(a--<=0){l&&cancelAnimationFrame(l);return}if(e()){if(cancelAnimationFrame(l),!s.current)return;r(!1);return}l=requestAnimationFrame(i)}l=requestAnimationFrame(i)}}):null}const ie=n.createContext(null);function De(){return{groups:new Map,get(e,t){var r;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let o=(r=s.get(t))!=null?r:0;s.set(t,o+1);let l=Array.from(s.keys()).indexOf(t);function a(){let i=s.get(t);i>1?s.set(t,i-1):s.delete(t)}return[l,a]}}}function Me({children:e}){let t=n.useRef(De());return n.createElement(ie.Provider,{value:t},e)}function ce(e){let t=n.useContext(ie);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let r=n.useId(),[s,o]=t.current.get(e,r);return n.useEffect(()=>o,[]),s}var Re=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Re||{}),_e=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(_e||{}),Oe=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Oe||{});let Le={0(e,t){var r;let s=L(e.tabs,u=>u.current),o=L(e.panels,u=>u.current),l=s.filter(u=>{var x;return!((x=u.current)!=null&&x.hasAttribute("disabled"))}),a={...e,tabs:s,panels:o};if(t.index<0||t.index>s.length-1){let u=N(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>N(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(l.length===0)return a;let x=N(u,{0:()=>s.indexOf(l[0]),1:()=>s.indexOf(l[l.length-1])});return{...a,selectedIndex:x===-1?e.selectedIndex:x}}let i=s.slice(0,t.index),P=[...s.slice(t.index),...i].find(u=>l.includes(u));if(!P)return a;let p=(r=s.indexOf(P))!=null?r:e.selectedIndex;return p===-1&&(p=e.selectedIndex),{...a,selectedIndex:p}},1(e,t){if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],s=L([...e.tabs,t.tab],l=>l.current),o=e.selectedIndex;return e.info.current.isControlled||(o=s.indexOf(r),o===-1&&(o=e.selectedIndex)),{...e,tabs:s,selectedIndex:o}},2(e,t){return{...e,tabs:e.tabs.filter(r=>r!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:L([...e.panels,t.panel],r=>r.current)}},4(e,t){return{...e,panels:e.panels.filter(r=>r!==t.panel)}}},Y=n.createContext(null);Y.displayName="TabsDataContext";function _(e){let t=n.useContext(Y);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_),r}return t}let X=n.createContext(null);X.displayName="TabsActionsContext";function Z(e){let t=n.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Z),r}return t}function Ne(e,t){return N(t.type,Le,e,t)}let Ge="div";function Ue(e,t){let{defaultIndex:r=0,vertical:s=!1,manual:o=!1,onChange:l,selectedIndex:a=null,...i}=e;const P=s?"vertical":"horizontal",p=o?"manual":"auto";let u=a!==null,x=K({isControlled:u}),j=U(t),[m,d]=n.useReducer(Ne,{info:x,selectedIndex:a??r,tabs:[],panels:[]}),C=n.useMemo(()=>({selectedIndex:m.selectedIndex}),[m.selectedIndex]),y=K(l||(()=>{})),T=K(m.tabs),b=n.useMemo(()=>({orientation:P,activation:p,...m}),[P,p,m]),$=D(g=>(d({type:1,tab:g}),()=>d({type:2,tab:g}))),F=D(g=>(d({type:3,panel:g}),()=>d({type:4,panel:g}))),h=D(g=>{v.current!==g&&y.current(g),u||d({type:0,index:g})}),v=K(u?e.selectedIndex:m.selectedIndex),w=n.useMemo(()=>({registerTab:$,registerPanel:F,change:h}),[]);q(()=>{d({type:0,index:a??r})},[a]),q(()=>{if(v.current===void 0||m.tabs.length<=0)return;let g=L(m.tabs,k=>k.current);g.some((k,z)=>m.tabs[z]!==k)&&h(g.indexOf(m.tabs[v.current]))});let M={ref:j},O=J();return A.createElement(Me,null,A.createElement(X.Provider,{value:w},A.createElement(Y.Provider,{value:b},b.tabs.length<=0&&A.createElement(ze,{onFocus:()=>{var g,k;for(let z of T.current)if(((g=z.current)==null?void 0:g.tabIndex)===0)return(k=z.current)==null||k.focus(),!0;return!1}}),O({ourProps:M,theirProps:i,slot:C,defaultTag:Ge,name:"Tabs"}))))}let Je="div";function Be(e,t){let{orientation:r,selectedIndex:s}=_("Tab.List"),o=U(t),l=n.useMemo(()=>({selectedIndex:s}),[s]),a=e,i={ref:o,role:"tablist","aria-orientation":r};return J()({ourProps:i,theirProps:a,slot:l,defaultTag:Je,name:"Tabs.List"})}let He="button";function Ke(e,t){var r,s;let o=n.useId(),{id:l=`headlessui-tabs-tab-${o}`,disabled:a=!1,autoFocus:i=!1,...P}=e,{orientation:p,activation:u,selectedIndex:x,tabs:j,panels:m}=_("Tab"),d=Z("Tab"),C=_("Tab"),[y,T]=n.useState(null),b=n.useRef(null),$=U(b,t,T);q(()=>d.registerTab(b),[d,b]);let F=ce("tabs"),h=j.indexOf(b);h===-1&&(h=F);let v=h===x,w=D(f=>{var E;let B=f();if(B===H.Success&&u==="auto"){let ge=(E=he(b))==null?void 0:E.activeElement,re=C.tabs.findIndex(xe=>xe.current===ge);re!==-1&&d.change(re)}return B}),M=D(f=>{let E=j.map(B=>B.current).filter(Boolean);if(f.key===I.Space||f.key===I.Enter){f.preventDefault(),f.stopPropagation(),d.change(h);return}switch(f.key){case I.Home:case I.PageUp:return f.preventDefault(),f.stopPropagation(),w(()=>R(E,S.First));case I.End:case I.PageDown:return f.preventDefault(),f.stopPropagation(),w(()=>R(E,S.Last))}if(w(()=>N(p,{vertical(){return f.key===I.ArrowUp?R(E,S.Previous|S.WrapAround):f.key===I.ArrowDown?R(E,S.Next|S.WrapAround):H.Error},horizontal(){return f.key===I.ArrowLeft?R(E,S.Previous|S.WrapAround):f.key===I.ArrowRight?R(E,S.Next|S.WrapAround):H.Error}}))===H.Success)return f.preventDefault()}),O=n.useRef(!1),g=D(()=>{var f;O.current||(O.current=!0,(f=b.current)==null||f.focus({preventScroll:!0}),d.change(h),we(()=>{O.current=!1}))}),k=D(f=>{f.preventDefault()}),{isFocusVisible:z,focusProps:de}=ue({autoFocus:i}),{isHovered:ee,hoverProps:fe}=Ae({isDisabled:a}),{pressed:te,pressProps:pe}=Ce({disabled:a}),be=n.useMemo(()=>({selected:v,hover:ee,active:te,focus:z,autofocus:i,disabled:a}),[v,ee,z,te,i,a]),me=le({ref:$,onKeyDown:M,onMouseDown:k,onClick:g,id:l,role:"tab",type:Fe(e,y),"aria-controls":(s=(r=m[h])==null?void 0:r.current)==null?void 0:s.id,"aria-selected":v,tabIndex:v?0:-1,disabled:a||void 0,autoFocus:i},de,fe,pe);return J()({ourProps:me,theirProps:P,slot:be,defaultTag:He,name:"Tabs.Tab"})}let Ve="div";function We(e,t){let{selectedIndex:r}=_("Tab.Panels"),s=U(t),o=n.useMemo(()=>({selectedIndex:r}),[r]),l=e,a={ref:s};return J()({ourProps:a,theirProps:l,slot:o,defaultTag:Ve,name:"Tabs.Panels"})}let qe="div",Qe=se.RenderStrategy|se.Static;function Ye(e,t){var r,s,o,l;let a=n.useId(),{id:i=`headlessui-tabs-panel-${a}`,tabIndex:P=0,...p}=e,{selectedIndex:u,tabs:x,panels:j}=_("Tab.Panel"),m=Z("Tab.Panel"),d=n.useRef(null),C=U(d,t);q(()=>m.registerPanel(d),[m,d]);let y=ce("panels"),T=j.indexOf(d);T===-1&&(T=y);let b=T===u,{isFocusVisible:$,focusProps:F}=ue(),h=n.useMemo(()=>({selected:b,focus:$}),[b,$]),v=le({ref:C,id:i,role:"tabpanel","aria-labelledby":(s=(r=x[T])==null?void 0:r.current)==null?void 0:s.id,tabIndex:b?P:-1},F),w=J();return!b&&((o=p.unmount)==null||o)&&!((l=p.static)!=null&&l)?A.createElement(ae,{"aria-hidden":"true",...v}):w({ourProps:v,theirProps:p,slot:h,defaultTag:qe,features:Qe,visible:b,name:"Tabs.Panel"})}let Xe=G(Ke),Ze=G(Ue),et=G(Be),tt=G(We),rt=G(Ye),W=Object.assign(Xe,{Group:Ze,List:et,Panels:tt,Panel:rt});const st=V.object({currentPassword:V.string().min(1,"Kötelező mező"),newPassword:V.string().min(6,"A jelszónak legalább 6 karakter hosszúnak kell lennie"),confirmPassword:V.string()}).refine(e=>e.newPassword===e.confirmPassword,{message:"A jelszavak nem egyeznek",path:["confirmPassword"]}),nt=({onSubmit:e,errors:t,isSubmitting:r,successMessage:s,currentPassword:o,newPassword:l,confirmPassword:a,setCurrentPassword:i,setNewPassword:P,setConfirmPassword:p})=>c.jsx(Ee,{error:t.general||null,success:s,label:"Jelszó módosítása",children:c.jsxs("form",{onSubmit:e,className:"space-y-6",children:[c.jsx(Q,{label:"Jelenlegi jelszó",value:o,onChange:u=>i(u.target.value),error:t.currentPassword,enablePasswordToggle:!0}),c.jsx(Q,{label:"Új jelszó",value:l,onChange:u=>P(u.target.value),error:t.newPassword,enablePasswordToggle:!0}),c.jsx(Q,{label:"Jelszó megerősítése",value:a,onChange:u=>p(u.target.value),error:t.confirmPassword,enablePasswordToggle:!0}),c.jsx($e,{isPending:r,label:r?"Feldolgozás...":"Jelszó mentése"})]})}),at=A.lazy(()=>oe(()=>import("./Sidebar-CzqU64mm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),lt=A.lazy(()=>oe(()=>import("./UserInfo-BJ0JzLIK.js"),__vite__mapDeps([14,1,2,3]))),gt=()=>{const{logout:e,isAuthenticated:t,isSuperUser:r,username:s}=Te(),o=Ie(),[l,a]=n.useState(!1),[i,P]=n.useState(""),[p,u]=n.useState(""),[x,j]=n.useState(""),[m,d]=n.useState({}),[C,y]=n.useState(!1),[T,b]=n.useState(null),$=async()=>{try{await e(),ne.success("Sikeres kijelentkezés!"),o({to:"/login"})}catch{ne.error("Hiba történt a kijelentkezés során")}},F=async h=>{h.preventDefault(),y(!0),b(null);const v=st.safeParse({currentPassword:i,newPassword:p,confirmPassword:x});if(!v.success){const w={};v.error.issues.forEach(M=>{w[M.path[0]]=M.message}),d(w),y(!1);return}try{await ye(i,p,x),b("Jelszó sikeresen frissítve!"),P(""),u(""),j(""),d({})}catch(w){d({general:w.response?.data?.error||"Hiba történt a jelszó frissítésekor"})}finally{y(!1)}};return c.jsxs(c.Fragment,{children:[c.jsx(je,{}),c.jsx(ke,{children:c.jsxs(n.Suspense,{children:[c.jsx("div",{className:"lg:hidden p-4 flex justify-between items-center mt-15 z-50 overflow-hidden",children:c.jsx("button",{className:"p-2 border-border rounded-md focus:outline-none",onClick:()=>a(!0),"aria-label":"Open menu",children:c.jsx(Se,{size:36})})}),c.jsx(W.Group,{children:c.jsxs("div",{className:"flex mt-4 relative",children:[c.jsx(at,{isOpen:l,onClose:()=>a(!1)}),c.jsx("div",{className:"flex-1 p-8 ml-0 lg:mr-64 lg:ml-64",children:c.jsxs(W.Panels,{children:[c.jsx(W.Panel,{children:c.jsx(lt,{username:s||"",isSuperUser:r,isAuthenticated:t,onLogout:$})}),c.jsx(W.Panel,{children:c.jsx(nt,{onSubmit:F,errors:m,isSubmitting:C,successMessage:T,currentPassword:i,newPassword:p,confirmPassword:x,setCurrentPassword:P,setNewPassword:u,setConfirmPassword:j})})]})})]})})]})})]})};export{gt as P,W as T};
