const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TetelForm-D6dEvXhm.js","assets/index-olnGjB74.js","assets/index-BOlfXB0R.css","assets/index-ByYdXFAB.js","assets/InputField-C8kMXtBe.js","assets/PageTransition-CJHyo5J0.js","assets/index-B-DmT4Zv.js"])))=>i.map(i=>d[i]);
import{a as y,f as S,e as z,r as o,j as e,S as m,R as N,_ as T}from"./index-olnGjB74.js";import{u as k}from"./useQuery-Tn6Fa2GV.js";import{u as _}from"./useMutation-FPb60An5.js";import{k as E,h as P}from"./repo-VB8zIIGh.js";import{N as q}from"./Navbar-ODnhT9L7.js";import{P as D}from"./PageTransition-CJHyo5J0.js";import"./utils-km2FGkQ4.js";import"./link-DVucSle3.js";import"./index-B8DyzG5r.js";const C=N.lazy(()=>T(()=>import("./TetelForm-D6dEvXhm.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),F=()=>{const{id:d}=y({strict:!1}),i=Number(d),p=S(),f=z(),[x,l]=o.useState(null),[b,c]=o.useState(null),[g,r]=o.useState(!1),{data:n,isLoading:j}=k({queryKey:["tetelDetail",i],queryFn:()=>P(i),enabled:!isNaN(i)}),u=_({mutationFn:s=>E(i,s),onMutate:()=>{r(!0)},onSuccess:()=>{f.invalidateQueries({queryKey:["tetelDetail",i]}),c("Sikeres frissítés!"),setTimeout(()=>{c(null),p({to:`/tetelek/${i}`}),r(!1)},2e3)},onError:s=>{l(s.response?.data?.error||"Hiba a frissítés közben."),r(!1)}}),h=s=>{l(null),u.mutate({...s,sections:s.sections.map(t=>({...t,subsections:t.subsections.map(a=>({...a,id:a.id&&a.id<0?void 0:a.id}))})),flashcards:s.flashcards.map(t=>({...t,id:t.id&&t.id<0?void 0:t.id}))})};if(j)return e.jsx("div",{className:"p-10 text-center text-gray-300",children:e.jsx(m,{})});const v={name:n?.tetel.name||"",osszegzes:n?.osszegzes?.content||"",sections:n?.sections.map(s=>({...s,subsections:s.subsections||[]}))||[{content:"",subsections:[]}],flashcards:n?.questions||[]};return e.jsxs(e.Fragment,{children:[e.jsx(q,{}),e.jsx(D,{children:e.jsx(o.Suspense,{children:e.jsxs("div",{className:"relative",children:[g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backgroundColor:"rgba(25, 25, 30, 0.3)"},children:e.jsx(m,{})}),e.jsx(C,{initialData:v,onSubmit:h,isPending:u.isPending,error:x,success:b,label:"Tétel szerkesztése",submitLabel:"Tétel mentése"})]})})})]})},O=F;export{O as component};
