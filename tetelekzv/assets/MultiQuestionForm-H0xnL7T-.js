const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnswerInput-DGcyBzRi.js","assets/index-DgEvQsrA.js","assets/index-CK5AGBEG.css","assets/use-resolve-button-type-Cb4vzmeK.js","assets/label-GqxFQaGo.js","assets/bugs-D5O4fNyh.js","assets/QuestionInput-lUGu5zuy.js","assets/FormContainer-Z7QUG0pO.js","assets/SubmitButton-BnRpfG0s.js"])))=>i.map(i=>d[i]);
import{r as a,j as r,R as l,_ as u}from"./index-DgEvQsrA.js";import{o as w,a as C,s as E,b as R}from"./types-CZYGTQuY.js";const I=w({text:E().min(1,"A válasz szövege nem lehet üres"),isCorrect:R()}),h=w({question:E().min(1,"A kérdés megadása kötelező"),answers:C(I).length(4,"Pontosan négy válasz szükséges").refine(i=>i.some(c=>c.isCorrect),{message:"Legalább egy válasznak helyesnek kell lennie"})}),D=l.lazy(()=>u(()=>import("./AnswerInput-DGcyBzRi.js"),__vite__mapDeps([0,1,2,3,4,5]))),L=l.lazy(()=>u(()=>import("./QuestionInput-lUGu5zuy.js"),__vite__mapDeps([6,1,2]))),V=l.lazy(()=>u(()=>import("./FormContainer-Z7QUG0pO.js"),__vite__mapDeps([7,1,2]))),F=l.lazy(()=>u(()=>import("./SubmitButton-BnRpfG0s.js"),__vite__mapDeps([8,1,2]))),N=({onSubmit:i,isPending:c,initialQuestion:b="",initialAnswers:y=[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}],successMessage:x,errorMessage:v,submitLabel:g,formLabel:j})=>{const[o,z]=a.useState(b),[n,A]=a.useState(y),[f,S]=a.useState({question:void 0,answers:[null,null,null,null]}),[p,_]=a.useState({question:!1,answers:[!1,!1,!1,!1]});a.useEffect(()=>{const e=h.safeParse({question:o,answers:n}),s={question:void 0,answers:[null,null,null,null]};e.success||e.error.errors.forEach(t=>{t.path[0]==="question"?s.question=t.message:t.path[0]==="answers"&&typeof t.path[1]=="number"&&(s.answers[t.path[1]]=t.message)}),S(s)},[o,n]);const T=(e,s,t)=>{const m=[...n];m[e]={...m[e],[s]:t},A(m),_(d=>({...d,answers:d.answers.map((q,P)=>P===e?!0:q)}))},k=e=>{if(e.preventDefault(),!h.safeParse({question:o,answers:n}).success){_({question:!0,answers:[!0,!0,!0,!0]});return}i({question:o,answers:n})};return r.jsx(a.Suspense,{children:r.jsx(V,{error:v??null,success:x??null,label:j,children:r.jsxs("form",{onSubmit:k,className:"space-y-6",children:[r.jsx(L,{question:o,setQuestion:z,fieldErrors:f,touched:p}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Válaszok"}),n.map((e,s)=>r.jsx(D,{answer:e,index:s,updateAnswer:T,fieldErrors:f.answers[s],touched:p.answers[s]},s))]}),r.jsx(F,{isPending:c,label:g})]})})})};export{N as default};
