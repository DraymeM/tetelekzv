import{e as S,r as s,j as e,S as h,i as C,z as j,k as q,l as Q,m as A,n as L}from"./index-C5suzcpx.js";import{u as E}from"./useQuery-BM9AOtUC.js";import{L as P}from"./link-DfXfZ5aI.js";import{N as m}from"./Navbar-BUM_BvCX.js";import M from"./AnswerPicker-BmruZL5D.js";import{u as R,T as K}from"./useTimer-CJO4WBGU.js";import{d as D}from"./repo-BfVv8K4d.js";import{P as V}from"./PageTransition-DrbtWe0G.js";function X(){const g=S(),{data:t,isLoading:o,error:d}=E({queryKey:["randomMultiQuestion"],queryFn:D,retry:2,refetchOnWindowFocus:!1}),[y,c]=s.useState(0),[b,x]=s.useState(0),[v,i]=s.useState(0),[N,l]=s.useState(!1),{timerEnabled:u,setTimerEnabled:w,timerDuration:f,setTimerDuration:k,timeLeft:F,setTimeLeft:p}=R(a,10);function a(){g.invalidateQueries({queryKey:["randomMultiQuestion"]}),p(f),l(!1)}s.useEffect(()=>{!t&&!o&&a()},[t,o]);const T=n=>{N||(x(r=>r+1),n?(c(r=>r+1),i(r=>r+1)):i(0),l(!0))},z=()=>{c(0),x(0),i(0),l(!1),a()};return o?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("div",{className:"p-10 text-center",children:e.jsx(h,{})})]}):d?e.jsxs("div",{className:"p-10 text-center text-red-500",children:["Error: ",d.message]}):!t||"error"in t?e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("div",{className:"p-10 text-center text-muted-foreground",children:"No questions available."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx(V,{children:e.jsxs(s.Suspense,{fallback:e.jsx(h,{}),children:[e.jsxs(P,{to:"/mquestions",className:`inline-flex items-center px-3 py-2 border border-border mt-20 md:ml-10 ml-1 rounded-md\r
                               text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground\r
                               focus:outline-none focus:ring-2 focus:ring-primary transition-colors`,children:[e.jsx(C,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("main",{className:"flex flex-col items-center justify-center max-w-4xl mx-auto p-4 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-3",children:"Felelet Választás"}),e.jsx("p",{className:"mb-6 text-secondary-foreground",children:"Csak egy válaszlehetőség jó!"}),e.jsx(j,{as:s.Fragment,show:!0,appear:!0,enter:"transition ease-out duration-500",enterFrom:"opacity-0 translate-y-2",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-300",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-2",children:e.jsxs("div",{className:"flex flex-row gap-6 mb-6 text-muted-foreground text-sm justify-center",children:[e.jsxs("div",{className:"flex items-center md:gap-2 bg-green-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(q,{className:"text-green-500"}),e.jsxs("span",{children:["Válaszok:"," ",e.jsx("span",{className:"font-semibold text-green-500",children:y})]})]}),e.jsxs("div",{className:"flex items-center md:gap-2 bg-blue-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(Q,{className:"text-blue-500"}),e.jsxs("span",{children:["Kérdések:"," ",e.jsx("span",{className:"font-semibold text-blue-500",children:b})]})]}),e.jsxs("div",{className:"flex items-center md:gap-2 bg-yellow-100/20 px-4 py-2 rounded-md shadow-sm",children:[e.jsx(A,{className:"text-yellow-500"}),e.jsxs("span",{children:["Sorozat:"," ",e.jsx("span",{className:"font-semibold text-yellow-500",children:v})]})]})]})}),e.jsx(j,{as:s.Fragment,show:!!t,enter:"transition ease-out duration-500 transform",enterFrom:"opacity-0 translate-x-4",enterTo:"opacity-100 translate-x-0",leave:"transition ease-in duration-300 transform",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 translate-x-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-secondary text-foreground w-full overflow-auto max-h-[80vh] shadow-md",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:t.question}),e.jsx(M,{answers:t.answers,onPick:T})]}),e.jsx(K,{onNext:a,timerEnabled:u,setTimerEnabled:w,timerDuration:f,setTimerDuration:n=>{k(n),p(n)}}),u&&e.jsxs("div",{className:"text-gray-400 text-sm mt-4",children:["Következő kérdés ",F," másodperc múlva"]}),e.jsxs("button",{className:"mt-1 px-6 py-3 rounded bg-red-600 hover:bg-red-700 text-white transition-all transform hover:scale-105 flex items-center gap-2",onClick:z,children:[e.jsx(L,{}),"Újrakezdés"]})]})})]})]})})]})}export{X as M};
