const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DeleteModal-C_74ewKi.js","assets/index-DNhYfZVa.js","assets/index-5GsZzLaf.css","assets/AnswerPicker-C9IevmHh.js"])))=>i.map(i=>d[i]);
import{u as v,b as k,f as y,e as N,r as u,y as i,j as e,S as q,O as z,a as c,g as w,R as m,aI as _,aJ as P,_ as x}from"./index-DNhYfZVa.js";import{u as D}from"./useLocation-BnAQNzQs.js";import{u as E}from"./useQuery-B90wnf1T.js";import{u as F}from"./useMutation-DFJrYgeH.js";import{e as M,g as O}from"./repo-I0R3ESGW.js";import{P as Q}from"./PageTransition-CKedCoC9.js";import{O as S}from"./OfflinePlaceholder-BfCSPmJv.js";const A=m.lazy(()=>x(()=>import("./DeleteModal-C_74ewKi.js"),__vite__mapDeps([0,1,2]))),I=m.lazy(()=>x(()=>import("./AnswerPicker-C9IevmHh.js"),__vite__mapDeps([3,1,2])));function J(){const{id:t,qid:n}=v({from:"/tetelek/$id/questions/$qid"}),s=Number(n),h=D().pathname.includes("/edit"),{isAuthenticated:a,isSuperUser:f}=k(),p=y(),o=N(),[j,l]=u.useState(!1),{data:r,isLoading:g,error:b}=E({queryKey:["multiQuestions",s],queryFn:()=>O(s),staleTime:1e3*60*5,refetchOnWindowFocus:!1,retry:2}),d=F({mutationFn:()=>{if(!a)throw i.error("Ehhez be kell jelentkezned!"),new Error("Nincs engedélyed");if(!f)throw i.error("Nincs jogosultság a művelethez!"),new Error("Nincs jogosultság");return M(s)},onSuccess:()=>{o.invalidateQueries({queryKey:["tetelQuestions"]}),o.invalidateQueries({queryKey:["multiQuestions",s]}),i.success("Sikeresen törölted a kérdést."),p({to:"/tetelek/$id/questions",params:{id:t}})}});return g?e.jsx(q,{}):b?navigator.onLine?e.jsx("div",{className:"p-10 mt-20 text-center text-red-500",children:"Hiba történt a kérdés betöltése közben."}):e.jsx(S,{}):h?e.jsx(z,{}):!t||isNaN(Number(t))?e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 mt-20 text-center text-red-500",children:"Érvénytelen tétel ID"})}):r?e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsxs(u.Suspense,{children:[e.jsxs(c,{to:"/tetelek/$id/questions",params:{id:t},className:"inline-flex items-center px-3 py-2 border border-border mt-20 ml-10 rounded-md text-sm font-medium hover:bg-muted",children:[e.jsx(w,{className:"mr-2"}),"Vissza a kérdésekhez"]}),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 mt-6 bg-secondary rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center mb-4",children:r.question}),e.jsx(I,{answers:r.answers,onPick:()=>{}})]}),e.jsx(A,{isOpen:j,onClose:()=>l(!1),onDelete:()=>d.mutate(),isDeleting:d.isPending,itemName:r.question})]})}),a&&e.jsxs(e.Fragment,{children:[e.jsx(c,{to:"/tetelek/$id/questions/$qid/edit",params:{id:t,qid:n},className:`fixed bottom-20 right-7 p-3 bg-blue-600 text-white rounded-full \r
                       hover:bg-blue-700 transition-all hover:cursor-pointer transform hover:scale-105 flex items-center justify-center z-50`,title:"Szerkeszd a kérdést",children:e.jsx(_,{size:20})}),e.jsx("button",{onClick:()=>l(!0),className:`fixed bottom-7 right-7 p-3 bg-rose-600 text-white rounded-full \r
                       hover:bg-rose-700 hover:cursor-pointer transition-all transform hover:scale-105 flex items-center justify-center z-50`,title:"Töröld a kérdést",children:e.jsx(P,{size:20})})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-10 mt-20 text-center text-red-500",children:"A kérdés nem található."})})}export{J as M};
