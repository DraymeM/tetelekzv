const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Sidebar-uGEhGpXL.js","assets/index-C0Fg1H1H.js","assets/index-CF_iyIGy.css","assets/index-CZrnS2wd.js","assets/repo-CpeVcUY7.js","assets/FormContainer-Cs1htwH5.js","assets/InputField-Bc71MLOM.js","assets/SubmitButton-u-1GU2Ii.js","assets/types-CZYGTQuY.js","assets/PageTransition-B2bRsmKk.js","assets/OfflinePlaceholder-COO-2YQF.js","assets/useOnlineStatus-BNjoD1h4.js","assets/use-resolve-button-type-CbuUOT23.js","assets/UserInfo-BRyFaXlY.js"])))=>i.map(i=>d[i]);
import{r as a,aK as Pe,R as z,aL as ne,aM as he,a5 as G,a8 as U,M as V,X as R,aN as q,T as ve,al as S,aO as D,an as y,a2 as N,aP as we,ah as le,a6 as J,aQ as B,a3 as L,ak as se,j as d,b as Te,f as Ie,aR as Se,_ as oe,y as ae}from"./index-C0Fg1H1H.js";import{u as ye}from"./repo-CpeVcUY7.js";import je from"./FormContainer-Cs1htwH5.js";import W from"./InputField-Bc71MLOM.js";import Ee from"./SubmitButton-u-1GU2Ii.js";import{o as $e,s as Q}from"./types-CZYGTQuY.js";import{P as ke}from"./PageTransition-B2bRsmKk.js";import{O as Ae}from"./OfflinePlaceholder-COO-2YQF.js";import{u as Ce}from"./useOnlineStatus-BNjoD1h4.js";import{$ as ue,a as ze,w as Fe,e as Oe}from"./use-resolve-button-type-CbuUOT23.js";function Me({onFocus:e}){let[t,r]=a.useState(!0),s=Pe();return t?z.createElement(ne,{as:"button",type:"button",features:he.Focusable,onFocus:o=>{o.preventDefault();let l,n=50;function i(){if(n--<=0){l&&cancelAnimationFrame(l);return}if(e()){if(cancelAnimationFrame(l),!s.current)return;r(!1);return}l=requestAnimationFrame(i)}l=requestAnimationFrame(i)}}):null}const ie=a.createContext(null);function Re(){return{groups:new Map,get(e,t){var r;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let o=(r=s.get(t))!=null?r:0;s.set(t,o+1);let l=Array.from(s.keys()).indexOf(t);function n(){let i=s.get(t);i>1?s.set(t,i-1):s.delete(t)}return[l,n]}}}function De({children:e}){let t=a.useRef(Re());return a.createElement(ie.Provider,{value:t},e)}function ce(e){let t=a.useContext(ie);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let r=a.useId(),[s,o]=t.current.get(e,r);return a.useEffect(()=>o,[]),s}var _e=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(_e||{}),Le=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Le||{}),Ne=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Ne||{});let Ge={0(e,t){var r;let s=L(e.tabs,u=>u.current),o=L(e.panels,u=>u.current),l=s.filter(u=>{var P;return!((P=u.current)!=null&&P.hasAttribute("disabled"))}),n={...e,tabs:s,panels:o};if(t.index<0||t.index>s.length-1){let u=N(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>N(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(l.length===0)return n;let P=N(u,{0:()=>s.indexOf(l[0]),1:()=>s.indexOf(l[l.length-1])});return{...n,selectedIndex:P===-1?e.selectedIndex:P}}let i=s.slice(0,t.index),g=[...s.slice(t.index),...i].find(u=>l.includes(u));if(!g)return n;let m=(r=s.indexOf(g))!=null?r:e.selectedIndex;return m===-1&&(m=e.selectedIndex),{...n,selectedIndex:m}},1(e,t){if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],s=L([...e.tabs,t.tab],l=>l.current),o=e.selectedIndex;return e.info.current.isControlled||(o=s.indexOf(r),o===-1&&(o=e.selectedIndex)),{...e,tabs:s,selectedIndex:o}},2(e,t){return{...e,tabs:e.tabs.filter(r=>r!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:L([...e.panels,t.panel],r=>r.current)}},4(e,t){return{...e,panels:e.panels.filter(r=>r!==t.panel)}}},X=a.createContext(null);X.displayName="TabsDataContext";function _(e){let t=a.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_),r}return t}let Y=a.createContext(null);Y.displayName="TabsActionsContext";function Z(e){let t=a.useContext(Y);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Z),r}return t}function Ue(e,t){return N(t.type,Ge,e,t)}let Je="div";function Ke(e,t){let{defaultIndex:r=0,vertical:s=!1,manual:o=!1,onChange:l,selectedIndex:n=null,...i}=e;const g=s?"vertical":"horizontal",m=o?"manual":"auto";let u=n!==null,P=B({isControlled:u}),T=U(t),[p,f]=a.useReducer(Ue,{info:P,selectedIndex:n??r,tabs:[],panels:[]}),j=a.useMemo(()=>({selectedIndex:p.selectedIndex}),[p.selectedIndex]),F=B(l||(()=>{})),w=B(p.tabs),b=a.useMemo(()=>({orientation:g,activation:m,...p}),[g,m,p]),E=R(x=>(f({type:1,tab:x}),()=>f({type:2,tab:x}))),O=R(x=>(f({type:3,panel:x}),()=>f({type:4,panel:x}))),h=R(x=>{v.current!==x&&F.current(x),u||f({type:0,index:x})}),v=B(u?e.selectedIndex:p.selectedIndex),I=a.useMemo(()=>({registerTab:E,registerPanel:O,change:h}),[]);V(()=>{f({type:0,index:n??r})},[n]),V(()=>{if(v.current===void 0||p.tabs.length<=0)return;let x=L(p.tabs,C=>C.current);x.some((C,M)=>p.tabs[M]!==C)&&h(x.indexOf(p.tabs[v.current]))});let k={ref:T},A=J();return z.createElement(De,null,z.createElement(Y.Provider,{value:I},z.createElement(X.Provider,{value:b},b.tabs.length<=0&&z.createElement(Me,{onFocus:()=>{var x,C;for(let M of w.current)if(((x=M.current)==null?void 0:x.tabIndex)===0)return(C=M.current)==null||C.focus(),!0;return!1}}),A({ourProps:k,theirProps:i,slot:j,defaultTag:Je,name:"Tabs"}))))}let qe="div";function Be(e,t){let{orientation:r,selectedIndex:s}=_("Tab.List"),o=U(t),l=a.useMemo(()=>({selectedIndex:s}),[s]),n=e,i={ref:o,role:"tablist","aria-orientation":r};return J()({ourProps:i,theirProps:n,slot:l,defaultTag:qe,name:"Tabs.List"})}let He="button";function Ve(e,t){var r,s;let o=a.useId(),{id:l=`headlessui-tabs-tab-${o}`,disabled:n=!1,autoFocus:i=!1,...g}=e,{orientation:m,activation:u,selectedIndex:P,tabs:T,panels:p}=_("Tab"),f=Z("Tab"),j=_("Tab"),[F,w]=a.useState(null),b=a.useRef(null),E=U(b,t,w);V(()=>f.registerTab(b),[f,b]);let O=ce("tabs"),h=T.indexOf(b);h===-1&&(h=O);let v=h===P,I=R(c=>{var $;let K=c();if(K===q.Success&&u==="auto"){let xe=($=ve(b))==null?void 0:$.activeElement,re=j.tabs.findIndex(ge=>ge.current===xe);re!==-1&&f.change(re)}return K}),k=R(c=>{let $=T.map(K=>K.current).filter(Boolean);if(c.key===S.Space||c.key===S.Enter){c.preventDefault(),c.stopPropagation(),f.change(h);return}switch(c.key){case S.Home:case S.PageUp:return c.preventDefault(),c.stopPropagation(),I(()=>D($,y.First));case S.End:case S.PageDown:return c.preventDefault(),c.stopPropagation(),I(()=>D($,y.Last))}if(I(()=>N(m,{vertical(){return c.key===S.ArrowUp?D($,y.Previous|y.WrapAround):c.key===S.ArrowDown?D($,y.Next|y.WrapAround):q.Error},horizontal(){return c.key===S.ArrowLeft?D($,y.Previous|y.WrapAround):c.key===S.ArrowRight?D($,y.Next|y.WrapAround):q.Error}}))===q.Success)return c.preventDefault()}),A=a.useRef(!1),x=R(()=>{var c;A.current||(A.current=!0,(c=b.current)==null||c.focus({preventScroll:!0}),f.change(h),we(()=>{A.current=!1}))}),C=R(c=>{c.preventDefault()}),{isFocusVisible:M,focusProps:de}=ue({autoFocus:i}),{isHovered:ee,hoverProps:fe}=ze({isDisabled:n}),{pressed:te,pressProps:pe}=Fe({disabled:n}),me=a.useMemo(()=>({selected:v,hover:ee,active:te,focus:M,autofocus:i,disabled:n}),[v,ee,M,te,i,n]),be=le({ref:E,onKeyDown:k,onMouseDown:C,onClick:x,id:l,role:"tab",type:Oe(e,F),"aria-controls":(s=(r=p[h])==null?void 0:r.current)==null?void 0:s.id,"aria-selected":v,tabIndex:v?0:-1,disabled:n||void 0,autoFocus:i},de,fe,pe);return J()({ourProps:be,theirProps:g,slot:me,defaultTag:He,name:"Tabs.Tab"})}let We="div";function Qe(e,t){let{selectedIndex:r}=_("Tab.Panels"),s=U(t),o=a.useMemo(()=>({selectedIndex:r}),[r]),l=e,n={ref:s};return J()({ourProps:n,theirProps:l,slot:o,defaultTag:We,name:"Tabs.Panels"})}let Xe="div",Ye=se.RenderStrategy|se.Static;function Ze(e,t){var r,s,o,l;let n=a.useId(),{id:i=`headlessui-tabs-panel-${n}`,tabIndex:g=0,...m}=e,{selectedIndex:u,tabs:P,panels:T}=_("Tab.Panel"),p=Z("Tab.Panel"),f=a.useRef(null),j=U(f,t);V(()=>p.registerPanel(f),[p,f]);let F=ce("panels"),w=T.indexOf(f);w===-1&&(w=F);let b=w===u,{isFocusVisible:E,focusProps:O}=ue(),h=a.useMemo(()=>({selected:b,focus:E}),[b,E]),v=le({ref:j,id:i,role:"tabpanel","aria-labelledby":(s=(r=P[w])==null?void 0:r.current)==null?void 0:s.id,tabIndex:b?g:-1},O),I=J();return!b&&((o=m.unmount)==null||o)&&!((l=m.static)!=null&&l)?z.createElement(ne,{"aria-hidden":"true",...v}):I({ourProps:v,theirProps:m,slot:h,defaultTag:Xe,features:Ye,visible:b,name:"Tabs.Panel"})}let et=G(Ve),tt=G(Ke),rt=G(Be),st=G(Qe),at=G(Ze),H=Object.assign(et,{Group:tt,List:rt,Panels:st,Panel:at});const nt=$e({currentPassword:Q().min(1,"Kötelező mező"),newPassword:Q().min(6,"A jelszónak legalább 6 karakter hosszúnak kell lennie"),confirmPassword:Q()}).refine(e=>e.newPassword===e.confirmPassword,{message:"A jelszavak nem egyeznek",path:["confirmPassword"]}),lt=({onSubmit:e,errors:t,isSubmitting:r,successMessage:s,currentPassword:o,newPassword:l,confirmPassword:n,setCurrentPassword:i,setNewPassword:g,setConfirmPassword:m})=>d.jsx(je,{error:t.general||null,success:s,label:"Jelszó módosítása",children:d.jsxs("form",{onSubmit:e,className:"space-y-6 max-h-[90dvh]",children:[d.jsx(W,{label:"Jelenlegi jelszó",value:o,onChange:u=>i(u.target.value),error:t.currentPassword,enablePasswordToggle:!0}),d.jsx(W,{label:"Új jelszó",value:l,onChange:u=>g(u.target.value),error:t.newPassword,enablePasswordToggle:!0}),d.jsx(W,{label:"Jelszó megerősítése",value:n,onChange:u=>m(u.target.value),error:t.confirmPassword,enablePasswordToggle:!0}),d.jsx(Ee,{isPending:r,label:r?"Feldolgozás...":"Jelszó mentése"})]})}),ot=z.lazy(()=>oe(()=>import("./Sidebar-uGEhGpXL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),ut=z.lazy(()=>oe(()=>import("./UserInfo-BRyFaXlY.js"),__vite__mapDeps([13,1,2,3]))),ht=()=>{const{logout:e,isAuthenticated:t,isSuperUser:r,username:s}=Te(),o=Ie(),[l,n]=a.useState(!1),i=Ce(),[g,m]=a.useState(""),[u,P]=a.useState(""),[T,p]=a.useState(""),[f,j]=a.useState({}),[F,w]=a.useState(!1),[b,E]=a.useState(null),O=async()=>{try{await e(),ae.success("Sikeres kijelentkezés!"),o({to:"/login"})}catch{ae.error("Hiba történt a kijelentkezés során")}},h=async v=>{v.preventDefault(),w(!0),E(null);const I=nt.safeParse({currentPassword:g,newPassword:u,confirmPassword:T});if(!I.success){const k={};I.error.issues.forEach(A=>{k[A.path[0]]=A.message}),j(k),w(!1);return}try{await ye(g,u,T),E("Jelszó sikeresen frissítve!"),m(""),P(""),p(""),j({})}catch(k){j({general:k.response?.data?.error||"Hiba történt a jelszó frissítésekor"})}finally{w(!1)}};return i?d.jsx(ke,{children:d.jsxs(a.Suspense,{children:[d.jsx("div",{className:"lg:hidden p-4 flex justify-between items-center z-50",children:d.jsx("button",{className:"p-2 border-border rounded-md focus:outline-none",onClick:()=>n(!0),"aria-label":"Open menu",children:d.jsx(Se,{size:36})})}),d.jsx(H.Group,{children:d.jsxs("div",{className:"flex flex-col lg:flex-row relative min-h-[calc(60dvh-4rem)]",children:[d.jsx(ot,{isOpen:l,onClose:()=>n(!1)}),d.jsx("div",{className:"flex-1 md:p-4  mx-auto max-w-sm md:max-w-lg lg:max-w-full lg:ml-64 lg:mr-64",children:d.jsxs(H.Panels,{children:[d.jsx(H.Panel,{children:d.jsx(ut,{username:s||"",isSuperUser:r,isAuthenticated:t,onLogout:O})}),d.jsx(H.Panel,{children:d.jsx(lt,{onSubmit:h,errors:f,isSubmitting:F,successMessage:b,currentPassword:g,newPassword:u,confirmPassword:T,setCurrentPassword:m,setNewPassword:P,setConfirmPassword:p})})]})})]})})]})}):d.jsx(Ae,{})};export{ht as P,H as T};
