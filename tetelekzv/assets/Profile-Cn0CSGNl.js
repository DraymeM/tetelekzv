const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Sidebar-F7VVjXCK.js","assets/index-NwrGM-P6.js","assets/index-LojOYYw_.css","assets/index-C3PZHkF1.js","assets/Navbar-hr4SqBrg.js","assets/index-BGB11LLy.js","assets/repo-Esx1YiU5.js","assets/FormContainer-7KbN3BqJ.js","assets/InputField-BMPVLiac.js","assets/SubmitButton-CyymzPF8.js","assets/types-CZYGTQuY.js","assets/PageTransition-DJKPOuyw.js","assets/OfflinePlaceholder-DAWkdWrj.js","assets/useOnlineStatus-BA9DVo6w.js","assets/use-resolve-button-type-3hfrmdn-.js","assets/UserInfo-BiPus9Pr.js"])))=>i.map(i=>d[i]);
import{r as a,t as Pe,R as F,v as ne,w as he,K as U,x as G,A as q,B as M,C as H,D as ve,E as I,H as R,T as S,I as N,J as we,M as le,N as J,P as K,Q as L,U as se,j as i,d as Te,g as Ie,V as Se,_ as oe,y as ae}from"./index-NwrGM-P6.js";import{N as ye}from"./Navbar-hr4SqBrg.js";import{u as je}from"./repo-Esx1YiU5.js";import Ee from"./FormContainer-7KbN3BqJ.js";import W from"./InputField-BMPVLiac.js";import $e from"./SubmitButton-CyymzPF8.js";import{o as ke,s as Q}from"./types-CZYGTQuY.js";import{P as Ae}from"./PageTransition-DJKPOuyw.js";import{O as Ce}from"./OfflinePlaceholder-DAWkdWrj.js";import{u as Fe}from"./useOnlineStatus-BA9DVo6w.js";import{$ as ue,a as ze,w as Oe,e as De}from"./use-resolve-button-type-3hfrmdn-.js";function Me({onFocus:e}){let[t,r]=a.useState(!0),s=Pe();return t?F.createElement(ne,{as:"button",type:"button",features:he.Focusable,onFocus:o=>{o.preventDefault();let l,n=50;function c(){if(n--<=0){l&&cancelAnimationFrame(l);return}if(e()){if(cancelAnimationFrame(l),!s.current)return;r(!1);return}l=requestAnimationFrame(c)}l=requestAnimationFrame(c)}}):null}const ie=a.createContext(null);function Re(){return{groups:new Map,get(e,t){var r;let s=this.groups.get(e);s||(s=new Map,this.groups.set(e,s));let o=(r=s.get(t))!=null?r:0;s.set(t,o+1);let l=Array.from(s.keys()).indexOf(t);function n(){let c=s.get(t);c>1?s.set(t,c-1):s.delete(t)}return[l,n]}}}function _e({children:e}){let t=a.useRef(Re());return a.createElement(ie.Provider,{value:t},e)}function ce(e){let t=a.useContext(ie);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let r=a.useId(),[s,o]=t.current.get(e,r);return a.useEffect(()=>o,[]),s}var Le=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Le||{}),Ne=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Ne||{}),Ue=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Ue||{});let Ge={0(e,t){var r;let s=L(e.tabs,u=>u.current),o=L(e.panels,u=>u.current),l=s.filter(u=>{var x;return!((x=u.current)!=null&&x.hasAttribute("disabled"))}),n={...e,tabs:s,panels:o};if(t.index<0||t.index>s.length-1){let u=N(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>N(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(l.length===0)return n;let x=N(u,{0:()=>s.indexOf(l[0]),1:()=>s.indexOf(l[l.length-1])});return{...n,selectedIndex:x===-1?e.selectedIndex:x}}let c=s.slice(0,t.index),P=[...s.slice(t.index),...c].find(u=>l.includes(u));if(!P)return n;let p=(r=s.indexOf(P))!=null?r:e.selectedIndex;return p===-1&&(p=e.selectedIndex),{...n,selectedIndex:p}},1(e,t){if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],s=L([...e.tabs,t.tab],l=>l.current),o=e.selectedIndex;return e.info.current.isControlled||(o=s.indexOf(r),o===-1&&(o=e.selectedIndex)),{...e,tabs:s,selectedIndex:o}},2(e,t){return{...e,tabs:e.tabs.filter(r=>r!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:L([...e.panels,t.panel],r=>r.current)}},4(e,t){return{...e,panels:e.panels.filter(r=>r!==t.panel)}}},Y=a.createContext(null);Y.displayName="TabsDataContext";function _(e){let t=a.useContext(Y);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,_),r}return t}let X=a.createContext(null);X.displayName="TabsActionsContext";function Z(e){let t=a.useContext(X);if(t===null){let r=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Z),r}return t}function Je(e,t){return N(t.type,Ge,e,t)}let Be="div";function He(e,t){let{defaultIndex:r=0,vertical:s=!1,manual:o=!1,onChange:l,selectedIndex:n=null,...c}=e;const P=s?"vertical":"horizontal",p=o?"manual":"auto";let u=n!==null,x=K({isControlled:u}),y=G(t),[b,d]=a.useReducer(Je,{info:x,selectedIndex:n??r,tabs:[],panels:[]}),z=a.useMemo(()=>({selectedIndex:b.selectedIndex}),[b.selectedIndex]),j=K(l||(()=>{})),w=K(b.tabs),m=a.useMemo(()=>({orientation:P,activation:p,...b}),[P,p,b]),$=M(g=>(d({type:1,tab:g}),()=>d({type:2,tab:g}))),O=M(g=>(d({type:3,panel:g}),()=>d({type:4,panel:g}))),h=M(g=>{v.current!==g&&j.current(g),u||d({type:0,index:g})}),v=K(u?e.selectedIndex:b.selectedIndex),T=a.useMemo(()=>({registerTab:$,registerPanel:O,change:h}),[]);q(()=>{d({type:0,index:n??r})},[n]),q(()=>{if(v.current===void 0||b.tabs.length<=0)return;let g=L(b.tabs,C=>C.current);g.some((C,D)=>b.tabs[D]!==C)&&h(g.indexOf(b.tabs[v.current]))});let k={ref:y},A=J();return F.createElement(_e,null,F.createElement(X.Provider,{value:T},F.createElement(Y.Provider,{value:m},m.tabs.length<=0&&F.createElement(Me,{onFocus:()=>{var g,C;for(let D of w.current)if(((g=D.current)==null?void 0:g.tabIndex)===0)return(C=D.current)==null||C.focus(),!0;return!1}}),A({ourProps:k,theirProps:c,slot:z,defaultTag:Be,name:"Tabs"}))))}let Ke="div";function Ve(e,t){let{orientation:r,selectedIndex:s}=_("Tab.List"),o=G(t),l=a.useMemo(()=>({selectedIndex:s}),[s]),n=e,c={ref:o,role:"tablist","aria-orientation":r};return J()({ourProps:c,theirProps:n,slot:l,defaultTag:Ke,name:"Tabs.List"})}let qe="button";function We(e,t){var r,s;let o=a.useId(),{id:l=`headlessui-tabs-tab-${o}`,disabled:n=!1,autoFocus:c=!1,...P}=e,{orientation:p,activation:u,selectedIndex:x,tabs:y,panels:b}=_("Tab"),d=Z("Tab"),z=_("Tab"),[j,w]=a.useState(null),m=a.useRef(null),$=G(m,t,w);q(()=>d.registerTab(m),[d,m]);let O=ce("tabs"),h=y.indexOf(m);h===-1&&(h=O);let v=h===x,T=M(f=>{var E;let B=f();if(B===H.Success&&u==="auto"){let ge=(E=ve(m))==null?void 0:E.activeElement,re=z.tabs.findIndex(xe=>xe.current===ge);re!==-1&&d.change(re)}return B}),k=M(f=>{let E=y.map(B=>B.current).filter(Boolean);if(f.key===I.Space||f.key===I.Enter){f.preventDefault(),f.stopPropagation(),d.change(h);return}switch(f.key){case I.Home:case I.PageUp:return f.preventDefault(),f.stopPropagation(),T(()=>R(E,S.First));case I.End:case I.PageDown:return f.preventDefault(),f.stopPropagation(),T(()=>R(E,S.Last))}if(T(()=>N(p,{vertical(){return f.key===I.ArrowUp?R(E,S.Previous|S.WrapAround):f.key===I.ArrowDown?R(E,S.Next|S.WrapAround):H.Error},horizontal(){return f.key===I.ArrowLeft?R(E,S.Previous|S.WrapAround):f.key===I.ArrowRight?R(E,S.Next|S.WrapAround):H.Error}}))===H.Success)return f.preventDefault()}),A=a.useRef(!1),g=M(()=>{var f;A.current||(A.current=!0,(f=m.current)==null||f.focus({preventScroll:!0}),d.change(h),we(()=>{A.current=!1}))}),C=M(f=>{f.preventDefault()}),{isFocusVisible:D,focusProps:de}=ue({autoFocus:c}),{isHovered:ee,hoverProps:fe}=ze({isDisabled:n}),{pressed:te,pressProps:pe}=Oe({disabled:n}),me=a.useMemo(()=>({selected:v,hover:ee,active:te,focus:D,autofocus:c,disabled:n}),[v,ee,D,te,c,n]),be=le({ref:$,onKeyDown:k,onMouseDown:C,onClick:g,id:l,role:"tab",type:De(e,j),"aria-controls":(s=(r=b[h])==null?void 0:r.current)==null?void 0:s.id,"aria-selected":v,tabIndex:v?0:-1,disabled:n||void 0,autoFocus:c},de,fe,pe);return J()({ourProps:be,theirProps:P,slot:me,defaultTag:qe,name:"Tabs.Tab"})}let Qe="div";function Ye(e,t){let{selectedIndex:r}=_("Tab.Panels"),s=G(t),o=a.useMemo(()=>({selectedIndex:r}),[r]),l=e,n={ref:s};return J()({ourProps:n,theirProps:l,slot:o,defaultTag:Qe,name:"Tabs.Panels"})}let Xe="div",Ze=se.RenderStrategy|se.Static;function et(e,t){var r,s,o,l;let n=a.useId(),{id:c=`headlessui-tabs-panel-${n}`,tabIndex:P=0,...p}=e,{selectedIndex:u,tabs:x,panels:y}=_("Tab.Panel"),b=Z("Tab.Panel"),d=a.useRef(null),z=G(d,t);q(()=>b.registerPanel(d),[b,d]);let j=ce("panels"),w=y.indexOf(d);w===-1&&(w=j);let m=w===u,{isFocusVisible:$,focusProps:O}=ue(),h=a.useMemo(()=>({selected:m,focus:$}),[m,$]),v=le({ref:z,id:c,role:"tabpanel","aria-labelledby":(s=(r=x[w])==null?void 0:r.current)==null?void 0:s.id,tabIndex:m?P:-1},O),T=J();return!m&&((o=p.unmount)==null||o)&&!((l=p.static)!=null&&l)?F.createElement(ne,{"aria-hidden":"true",...v}):T({ourProps:v,theirProps:p,slot:h,defaultTag:Xe,features:Ze,visible:m,name:"Tabs.Panel"})}let tt=U(We),rt=U(He),st=U(Ve),at=U(Ye),nt=U(et),V=Object.assign(tt,{Group:rt,List:st,Panels:at,Panel:nt});const lt=ke({currentPassword:Q().min(1,"Kötelező mező"),newPassword:Q().min(6,"A jelszónak legalább 6 karakter hosszúnak kell lennie"),confirmPassword:Q()}).refine(e=>e.newPassword===e.confirmPassword,{message:"A jelszavak nem egyeznek",path:["confirmPassword"]}),ot=({onSubmit:e,errors:t,isSubmitting:r,successMessage:s,currentPassword:o,newPassword:l,confirmPassword:n,setCurrentPassword:c,setNewPassword:P,setConfirmPassword:p})=>i.jsx(Ee,{error:t.general||null,success:s,label:"Jelszó módosítása",children:i.jsxs("form",{onSubmit:e,className:"space-y-6 max-h-[90dvh]",children:[i.jsx(W,{label:"Jelenlegi jelszó",value:o,onChange:u=>c(u.target.value),error:t.currentPassword,enablePasswordToggle:!0}),i.jsx(W,{label:"Új jelszó",value:l,onChange:u=>P(u.target.value),error:t.newPassword,enablePasswordToggle:!0}),i.jsx(W,{label:"Jelszó megerősítése",value:n,onChange:u=>p(u.target.value),error:t.confirmPassword,enablePasswordToggle:!0}),i.jsx($e,{isPending:r,label:r?"Feldolgozás...":"Jelszó mentése"})]})}),ut=F.lazy(()=>oe(()=>import("./Sidebar-F7VVjXCK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),it=F.lazy(()=>oe(()=>import("./UserInfo-BiPus9Pr.js"),__vite__mapDeps([15,1,2,3]))),wt=()=>{const{logout:e,isAuthenticated:t,isSuperUser:r,username:s}=Te(),o=Ie(),[l,n]=a.useState(!1),[c,P]=a.useState(""),[p,u]=a.useState(""),[x,y]=a.useState(""),[b,d]=a.useState({}),[z,j]=a.useState(!1),[w,m]=a.useState(null),$=Fe(),O=async()=>{try{await e(),ae.success("Sikeres kijelentkezés!"),o({to:"/login"})}catch{ae.error("Hiba történt a kijelentkezés során")}},h=async v=>{v.preventDefault(),j(!0),m(null);const T=lt.safeParse({currentPassword:c,newPassword:p,confirmPassword:x});if(!T.success){const k={};T.error.issues.forEach(A=>{k[A.path[0]]=A.message}),d(k),j(!1);return}try{await je(c,p,x),m("Jelszó sikeresen frissítve!"),P(""),u(""),y(""),d({})}catch(k){d({general:k.response?.data?.error||"Hiba történt a jelszó frissítésekor"})}finally{j(!1)}};return $?i.jsxs(i.Fragment,{children:[i.jsx(ye,{}),i.jsx(Ae,{children:i.jsxs(a.Suspense,{children:[i.jsx("div",{className:"lg:hidden p-4 flex justify-between items-center mt-15 z-50 overflow-hidden",children:i.jsx("button",{className:"p-2 border-border rounded-md focus:outline-none",onClick:()=>n(!0),"aria-label":"Open menu",children:i.jsx(Se,{size:36})})}),i.jsx(V.Group,{children:i.jsxs("div",{className:"flex mt-4 relative",children:[i.jsx(ut,{isOpen:l,onClose:()=>n(!1)}),i.jsx("div",{className:"flex-1 p-8 ml-0 lg:mr-64 lg:ml-64",children:i.jsxs(V.Panels,{children:[i.jsx(V.Panel,{children:i.jsx(it,{username:s||"",isSuperUser:r,isAuthenticated:t,onLogout:O})}),i.jsx(V.Panel,{children:i.jsx(ot,{onSubmit:h,errors:b,isSubmitting:z,successMessage:w,currentPassword:c,newPassword:p,confirmPassword:x,setCurrentPassword:P,setNewPassword:u,setConfirmPassword:y})})]})})]})})]})})]}):i.jsx(i.Fragment,{children:i.jsx(Ce,{})})};export{wt as P,V as T};
